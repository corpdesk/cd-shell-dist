(self.webpackChunkcd_shell=self.webpackChunkcd_shell||[]).push([[484],{484:(R,E,d)=>{d.r(E),d.d(E,{AccountModule:()=>j});var I=d(9354),l=d(5662),m=d(2264);const k=[{path:"auth",loadChildren:()=>Promise.resolve().then(d.bind(d,8631)).then(c=>c.AuthModule)}];let T=(()=>{class c{router;constructor(e){this.router=e,this.monitorRouting()}monitorRouting(){this.router.events.subscribe(e=>{e instanceof l.NavigationStart?console.log("AccountRoutingModule::monitorRouting()/Navigation started to:",e.url):e instanceof l.NavigationEnd?console.log("AccountRoutingModule::monitorRouting()/Navigation ended at:",e.url):e instanceof l.NavigationCancel?console.warn("AccountRoutingModule::monitorRouting()/Navigation canceled:",e.url):e instanceof l.NavigationError&&console.error("AccountRoutingModule::monitorRouting()/Navigation error:",e.url,e.error)})}static \u0275fac=function(N){return new(N||c)(m.\u0275\u0275inject(l.Router))};static \u0275mod=m.\u0275\u0275defineNgModule({type:c});static \u0275inj=m.\u0275\u0275defineInjector({imports:[l.RouterModule.forChild(k),l.RouterModule]})}return c})();var D=d(8631);let j=(()=>{class c{static \u0275fac=function(N){return new(N||c)};static \u0275mod=m.\u0275\u0275defineNgModule({type:c});static \u0275inj=m.\u0275\u0275defineInjector({imports:[I.CommonModule,T,l.RouterModule,D.AuthModule]})}return c})()},8631:(R,E,d)=>{d.r(E),d.d(E,{AuthModule:()=>de});var I=d(9354),l=d(2952),m=d(5662),k=d(1475),T=d(4741),D=d(467),j=d(1777),c=d(4178),v=d(232),e=d(2264),N=d(3625),M=d(6706);const x=s=>({"is-invalid":s});function P(s,h){if(1&s&&(e.\u0275\u0275elementStart(0,"ngb-alert",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("dismissible",!1),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.error)}}function A(s,h){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"userName is required"),e.\u0275\u0275elementEnd())}function F(s,h){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"userName must be a valid userName address"),e.\u0275\u0275elementEnd())}function _(s,h){if(1&s&&(e.\u0275\u0275elementStart(0,"div",39),e.\u0275\u0275template(1,A,2,0,"div",40)(2,F,2,0,"div",40),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.loginInvalid),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.loginInvalid)}}function G(s,h){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Password is required"),e.\u0275\u0275elementEnd())}function B(s,h){if(1&s&&(e.\u0275\u0275elementStart(0,"div",39),e.\u0275\u0275template(1,G,2,0,"div",40),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.loginInvalid)}}let U=(()=>{class s{logger;svSio;svWss;svUser;svSess;svMenu;svNav;route;aRoute;svBase;svSioTest;debug=!0;baseModel;resourceGuid=(0,j.v4)();jwtWsToken;loginInvalid=!1;rememberMe=!0;submitted=!1;fg;postData;errMsg;error="";sidebarInitData;socketData=[];header="Welcome!";subheader="Sign in to continue to ASDAP";key;sid;uid;newUser;routParams={queryParams:{token:""},skipLocationChange:!0,replaceUrl:!1};constructor(t,o,n,r,a,y,f,g,S,p,b){this.logger=t,this.svSio=o,this.svWss=n,this.svUser=r,this.svSess=a,this.svMenu=y,this.svNav=f,this.route=g,this.aRoute=S,this.svBase=p,this.svSioTest=b,this.svSio.env=v.c,this.svSio.initSio(null,null),this.fg=new l.FormGroup({userName:new l.FormControl,password:new l.FormControl,rememberMe:new l.FormControl})}ngOnInit(){this.logger.info("cd-shell/LoginComponent::ngOnInit()/StorageType.CdObjId:",c.StorageType.CdObjId),this.initialize(),this.aRoute.queryParams.subscribe(r=>{this.key=r.key,this.sid=r.sid,this.uid=r.uid,console.log(this.key,this.sid,this.uid),this.setHeader()});const t={storageType:c.StorageType.CdObjId,cdObjId:{appId:localStorage.getItem("appId"),resourceGuid:null,resourceName:"SidebarComponent",ngModule:"SharedModule",jwtToken:localStorage.getItem("accessToken"),socket:null,commTrack:null}};this.logger.info("cd-shell/LoginComponent::ngOnInit()/filter:",t),this.sidebarInitData=this.searchLocalStorage(t),this.logger.info("cd-shell/LoginComponent::ngOnInit()/this.sidebarInitData:",this.sidebarInitData);const o=localStorage.getItem("socketData");if(o){let r=function(a){return"appInit"===a.name?a:null};this.socketData=JSON.parse(o).filter(r),this.logger.info("cd-shell/LoginComponent::ngOnInit()/this.socketData:",this.socketData)}else this.logger.info("Err: socket data is not valid")}initialize(){const t={storageType:c.StorageType.CdObjId,cdObjId:{appId:localStorage.getItem("appId"),resourceGuid:null,resourceName:"LoginComponent",ngModule:"SharedModule",jwtToken:localStorage.getItem("accessToken"),socket:null,commTrack:null}};this.logger.info("cd-shell/LoginComponent::ngOnInit()/filter:",t),this.sidebarInitData=this.searchLocalStorage(t),this.logger.info("cd-shell/LoginComponent::ngOnInit()/this.sidebarInitData:",this.sidebarInitData);const o=localStorage.getItem("socketData");if(o){let r=function(a){return"appInit"===a.name?a:null};this.socketData=JSON.parse(o).filter(r),this.logger.info("cd-shell/LoginComponent::ngOnInit()/this.socketData:",this.socketData)}else this.logger.info("Err: socket data is not valid");this.setAppId()}setAppId(){var t=this;return(0,D.A)(function*(){console.log("cd-shell/LoginComponent::setAppId()/01"),console.log("cd-shell/LoginComponent::setAppId()/this.svSio.socket:",t.svSio.socket),localStorage.removeItem("appId");const o=localStorage.getItem("appId");console.log("cd-shell/LoginComponent::setAppId()/appId:",o);const n=yield t.configPushPayload("register-client","push-registered-client",1e3);console.log("cd-shell/LoginComponent::setAppId()/envl:",n),t.listen("push-registered-client"),t.listen("msg-relayed"),t.listen("push-msg-relayed"),t.listen("push-menu"),t.sendSioMessage(n.pushData.triggerEvent,n)})()}listen(t){this.logger.info("cd-shell/cd-shell/LoginComponent::listen/event:",t),this.svSioTest.sioListen(t).subscribe({next:o=>{switch(console.log("cd-shell/LoginComponent::pushSubscribe()/payLoad:",o),o.pushData.emittEvent){case"push-registered-client":console.log("cd-shell/LoginComponent::listenSecure()/push-registered-client/:payLoad.pushData.emittEvent:",o.pushData.emittEvent),console.log("cd-shell/LoginComponent::listenSecure()/push-registered-client/:payLoad.pushData.triggerEvent:",o.pushData.triggerEvent),console.log("handle push-registered-client event"),this.saveSocket(o);break;case"push-msg-relayed":console.log("cd-shell/LoginComponent::listenSecure()/push-msg-relayed/:payLoad.pushData.emittEvent:",o.pushData.emittEvent),console.log("cd-shell/LoginComponent::listenSecure()/push-msg-relayed/:payLoad.pushData.triggerEvent:",o.pushData.triggerEvent),console.log("handle push-msg-relayed event"),this.updateRelayed(o);break;case"msg-relayed":console.log("cd-shell/LoginComponent::listenSecure()/msg-relayed/:payLoad.pushData.emittEvent:",o.pushData.emittEvent),console.log("cd-shell/LoginComponent::listenSecure()/msg-relayed/:payLoad.pushData.triggerEvent:",o.pushData.triggerEvent),console.log("handle msg-relayed event");break;case"push-menu":console.log("cd-shell/LoginComponent::listenSecure()/push-menu/:payLoad.pushData.emittEvent:",o.pushData.emittEvent),console.log("cd-shell/LoginComponent::listenSecure()/push-menu/:payLoad.pushData.triggerEvent:",o.pushData.triggerEvent),console.log("cd-shell/LoginComponent::listenSecure()/push-menu/:payLoad:",o),console.log("handle push-menu event"),this.routParams.queryParams.token=o.pushData.token}},error:o=>{console.error("cd-shell/cd-shell/LoginComponent::listen/Error receiving message:",o)},complete:()=>{console.log("cd-shell/cd-shell/LoginComponent::listen/Message subscription complete")}})}sendSioMessage(t,o){this.logger.info("cd-shell/LoginComponent::sendSioMessage/triggerEvent:",t),this.logger.info("cd-shell/LoginComponent::sendSioMessage/envl:",o),this.svSioTest.sendMessage(t,o).subscribe({next:n=>{console.log("Message sent successfully:",n)},error:n=>{console.error("Error sending message:",n)},complete:()=>{console.log("Message sending complete")}})}setHeader(){console.log("starting LoginService::setHeader()"),this.key&&this.uid&&this.sid?this.svUser.getUser$({query:{where:{userId:this.uid,activationKey:this.key}}},this.sid).subscribe(o=>{console.log("LoginService::setHeader()/subscribe/res:",o),o.data.length>0&&(this.header=`Congratulations ${o.data[0].userName}, your account is now active.`)}):this.header="Welcome!"}login(t){this.logger.info("starting cd-shell/LoginComponent::login");let o=t.value;const n=t.valid;this.logger.info("cd-shell/LoginComponent::login/01"),this.logger.info("cd-shell/LoginComponent::login/fg:",t),this.logger.info("cd-shell/LoginComponent::login/valid:",n),this.submitted=!0,o=Object.assign({},o,{consumerGuid:v.c.consumerToken});try{this.logger.info("cd-shell/LoginComponent::login/02"),n&&(this.logger.info("cd-shell/LoginComponent::login/03"),this.initSession(o))}catch{this.logger.info("cd-shell/LoginComponent::login/04"),this.errMsg="Something went wrong!!",this.loginInvalid=!0}}initSession(t){this.logger.info("cd-shell/LoginComponent::initSession/01"),this.svUser.auth$(t).subscribe(o=>{if(!0===o.app_state.success){if(this.logger.info("cd-shell/LoginComponent::initSession/res:",JSON.stringify(o)),this.svSess.appState=o.app_state,null!==o.app_state.sess.cd_token&&o.app_state.success){this.logger.info("cd-shell/LoginComponent::initSession/02");const n=this.configPushPayload("login","push-menu",o.data.userData.userId);n.pushData.m=o.data.menuData,this.logger.info("cd-shell/LoginComponent::initSession/envl:",n),"sio"===v.c.wsMode&&(this.logger.info("cd-shell/LoginComponent::initSession/envl:...using sio"),this.svSio.sendPayLoad(n)),"wss"===v.c.wsMode&&(this.logger.info("cd-shell/LoginComponent::initSession/envl:...using wss"),this.svWss.sendMsg(n)),this.svSess.createSess(o,this.svMenu),this.svUser.currentUser={name:`${o.data.userData.userName}`,picture:`${v.c.shellHost}/user-resources/${o.data.userData.userGuid}/avatar-01/a.jpg`},this.svNav.userMenu=[{title:"Profile",link:"/pages/cd-auth/register"},{title:"Log out",link:"/pages/cd-auth/logout"}];const r={queryParams:{token:o.app_state.sess.cd_token},skipLocationChange:!0,replaceUrl:!1};this.route.navigate(["/dashboard"],r),this.route.navigate([v.c.initialPage],r)}}else this.errMsg="The userName and password were not valid",this.loginInvalid=!0,this.svSess.logout()})}configPushPayload(t,o,n){console.log("starting cd-user::LoginComponent::configPushPayload()"),this.resourceGuid=this.svBase.getGuid();const r={pushData:{pushGuid:"",m:"",pushRecepients:[],triggerEvent:"",emittEvent:"",token:"",isNotification:null,appSockets:this.socketData,isAppInit:!0,commTrack:{initTime:Number(new Date),relayTime:null,relayed:!1,pushed:!1,pushTime:null,deliveryTime:null,delivered:!1,completed:!1,completedTime:null}},req:null,resp:null};console.log("cd-user::LoginComponent::configPushPayload()/this.resourceGuid:",this.resourceGuid);const a=this.resourceGuid,y={appId:localStorage.getItem("appId"),ngModule:"UserFrontModule",resourceName:"LoginComponent",resourceGuid:this.resourceGuid,jwtToken:this.jwtWsToken,socket:null,socketId:"",commTrack:{initTime:Number(new Date),relayTime:null,relayed:!1,pushed:!1,pushTime:null,deliveryTime:null,delivered:!1,completed:!1,completedTime:null}};localStorage.setItem(a,JSON.stringify(y));const f=[{userId:n,subTypeId:1,cdObjId:y}],g={...r};g.pushData.triggerEvent=t,g.pushData.emittEvent=o;const S={...f[0]};S.subTypeId=1,g.pushData.pushRecepients.push(S);const p={...f[0]};return p.subTypeId=7,this.logger.info("cd-user/LoginComponent::configPushPayload()/uRecepient:",JSON.stringify(p)),p.cdObjId=this.sidebarInitData.value,g.pushData.pushRecepients.push(p),this.logger.info("cd-user/LoginComponent::configPushPayload()/envl:",JSON.stringify(g)),g}saveSocket(t){console.log("cd-shell/LoginComponent::saveSocket()/payLoad:",t);const o=t.pushData.appSockets.filter(function n(r){return"appInit"===r.name?r:null});if(o.length>0){const r=JSON.stringify(o);localStorage.removeItem("socketData"),localStorage.setItem("socketData",r)}}updateRelayed(t){console.log("updateRelayed()/01"),console.log("updateRelayed()/payLoad:",t)}searchLocalStorage(t){this.logger.info("starting cd-shell/LoginComponent::searchLocalStorage()/lcLength:");const o=[],n=localStorage.length;this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/lcLength:",n);for(let i=0;i<localStorage.length;i++){const u=localStorage.key(i);var a=localStorage.getItem(u);this.logger.info("Key: "+u+", Value: "+a);try{if(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/1"),"object"==typeof a){this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/2"),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/v:",a);const C=JSON.parse(a);"success"in C&&(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/3"),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/appState:",C)),"resourceGuid"in C&&(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/4"),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/cdObjId:",C)),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/5"),o.push({key:u,value:JSON.parse(a)})}else this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/typeof (v):",typeof a),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/6"),o.push({key:u,value:JSON.parse(a)})}catch(C){this.logger.info("offending item:",a),this.logger.info("the item is not an object"),this.logger.info("Error:",C)}}this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/lcArr:",o),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/f.cdObjId!.resourceName:",t.cdObjId.resourceName);const f=i=>"object"==typeof i.value,g=i=>"resourceName"in i.value,S=i=>i.value.resourceName===t.cdObjId.resourceName&&i.value.ngModule===t.cdObjId.ngModule,p=(i,u)=>i.value.commTrack.initTime>u.value.commTrack.initTime?i:u;let b=null;try{this.debug?(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/debug=true:"),b=o.filter(i=>"object"==typeof i.value?(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/filteredByObject: d:",i),i):null).filter(i=>"resourceName"in i.value?(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/filteredByResourceNameField: d:",i),i):null).filter(i=>(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/filteredByName: d:",i),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/filteredByName: d.value.resourceName:",i.value.resourceName),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/filteredByName: f.cdObjId!.resourceName:",t.cdObjId.resourceName),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/filteredByName: d.value.ngModule:",i.value.ngModule),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/filteredByName: f.cdObjId!.ngModule:",t.cdObjId.ngModule),i.value.resourceName===t.cdObjId.resourceName&&i.value.ngModule===t.cdObjId.ngModule?i:null)).reduce((i={},u={})=>(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/prev:",i),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/current:",u),i.value.commTrack.initTime>u.value.commTrack.initTime?i:u))):(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/debug=false:"),b=o.filter(f).filter(g).filter(S).reduce(p)),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/ret:",b)}catch(i){this.logger.info("Error:",i)}return b}onFocus(){this.errMsg=""}static \u0275fac=function(o){return new(o||s)(e.\u0275\u0275directiveInject(N.NGXLogger),e.\u0275\u0275directiveInject(c.SioClientService),e.\u0275\u0275directiveInject(c.WebsocketService),e.\u0275\u0275directiveInject(c.UserService),e.\u0275\u0275directiveInject(c.SessService),e.\u0275\u0275directiveInject(c.MenuService),e.\u0275\u0275directiveInject(c.NavService),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(c.BaseService),e.\u0275\u0275directiveInject(M.a))};static \u0275cmp=e.\u0275\u0275defineComponent({type:s,selectors:[["app-login"]],decls:56,vars:12,consts:[[1,"home-btn","d-none","d-sm-block"],["routerLink",""],[1,"mdi","mdi-home-variant","h2","text-white"],[1,"container-fluid","p-0"],[1,"row","g-0"],[1,"col-lg-4"],[1,"authentication-page-content","p-4","d-flex","align-items-center","min-vh-100"],[1,"w-100"],[1,"row","justify-content-center"],[1,"col-lg-9"],[1,"text-center"],["routerLink","",1,"logo"],["src","assets/images/logo-dark.png","height","20","alt","logo"],[1,"font-size-18","mt-4"],[1,"text-muted"],[1,"p-2","mt-5"],[1,"form-horizontal",3,"ngSubmit","formGroup"],["type","danger",3,"dismissible",4,"ngIf"],[1,"form-group","auth-form-group-custom","mb-4"],[1,"ri-user-2-line","auti-custom-input-icon"],["for","userName"],["formControlName","userName","id","userName","placeholder","userName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"ri-lock-2-line","auti-custom-input-icon"],["for","password"],["type","password","formControlName","password","id","password","placeholder","Password",1,"form-control",3,"ngClass"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","customControlInline",1,"custom-control-input"],["for","customControlInline",1,"custom-control-label"],[1,"mt-4","text-center"],["type","submit",1,"btn","btn-primary","w-md","waves-effect","waves-light"],["routerLink","/account/reset-password",1,"text-muted"],[1,"mdi","mdi-lock","mr-1"],[1,"mt-5","text-center"],["routerLink","/account/signup",1,"fw-medium","text-primary"],[1,"col-lg-8"],[1,"authentication-bg"],[1,"bg-overlay"],["type","danger",3,"dismissible"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"a",1),e.\u0275\u0275element(2,"i",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div")(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div")(12,"div",10)(13,"div")(14,"a",11),e.\u0275\u0275element(15,"img",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"h4",13),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"p",14),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",15)(21,"form",16),e.\u0275\u0275listener("ngSubmit",function(){return n.login(n.fg)}),e.\u0275\u0275template(22,P,2,2,"ngb-alert",17),e.\u0275\u0275elementStart(23,"div",18),e.\u0275\u0275element(24,"i",19),e.\u0275\u0275elementStart(25,"label",20),e.\u0275\u0275text(26,"User Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"input",21),e.\u0275\u0275template(28,_,3,2,"div",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"div",18),e.\u0275\u0275element(30,"i",23),e.\u0275\u0275elementStart(31,"label",24),e.\u0275\u0275text(32,"Password"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(33,"input",25),e.\u0275\u0275template(34,B,2,1,"div",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",26),e.\u0275\u0275element(36,"input",27),e.\u0275\u0275elementStart(37,"label",28),e.\u0275\u0275text(38,"Remember me"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"div",29)(40,"button",30),e.\u0275\u0275text(41,"Log In"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"div",29)(43,"a",31),e.\u0275\u0275element(44,"i",32),e.\u0275\u0275text(45," Forgot your password?"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(46,"div",33)(47,"p"),e.\u0275\u0275text(48,"Don't have an account ? "),e.\u0275\u0275elementStart(49,"a",34),e.\u0275\u0275text(50," Register "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"p"),e.\u0275\u0275text(52,"\xa9 2024 ASDAP. Powered by CORPDESK"),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275elementStart(53,"div",35)(54,"div",36),e.\u0275\u0275element(55,"div",37),e.\u0275\u0275elementEnd()()()()()),2&o&&(e.\u0275\u0275advance(17),e.\u0275\u0275textInterpolate(n.header),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.subheader),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",n.fg),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.error),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,x,n.submitted&&n.loginInvalid)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.submitted&&n.loginInvalid),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(10,x,n.submitted&&n.loginInvalid)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.submitted&&n.loginInvalid))},dependencies:[I.NgClass,I.NgIf,m.RouterLink,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,k.NgbAlert]})}return s})();var J=d(2778),O=d(6434),V=d(6380);let W=(()=>{class s{http;constructor(t){this.http=t}getAll(){return this.http.get("/api/login")}register(t){return this.http.post("/users/register",t)}static \u0275fac=function(o){return new(o||s)(e.\u0275\u0275inject(V.HttpClient))};static \u0275prov=e.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const w=s=>({"is-invalid":s});function $(s,h){1&s&&(e.\u0275\u0275elementStart(0,"ngb-alert",39),e.\u0275\u0275text(1,"Registeration successfull. "),e.\u0275\u0275elementEnd()),2&s&&e.\u0275\u0275property("dismissible",!1)}function z(s,h){if(1&s&&(e.\u0275\u0275elementStart(0,"ngb-alert",40),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("dismissible",!1),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.error)}}function K(s,h){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Userame is required"),e.\u0275\u0275elementEnd())}function q(s,h){if(1&s&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275template(1,K,2,0,"div",42),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.f.username.errors.required)}}function Q(s,h){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Email is required"),e.\u0275\u0275elementEnd())}function X(s,h){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Email must be a valid email address"),e.\u0275\u0275elementEnd())}function Y(s,h){if(1&s&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275template(1,Q,2,0,"div",42)(2,X,2,0,"div",42),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.f.email.errors.required),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.f.email.errors.email)}}function Z(s,h){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Password is required"),e.\u0275\u0275elementEnd())}function ee(s,h){if(1&s&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275template(1,Z,2,0,"div",42),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.f.password.errors.required)}}let te=(()=>{class s{formBuilder;route;router;authenticationService;userService;signupForm;submitted=!1;error="";successmsg=!1;year=(new Date).getFullYear();constructor(t,o,n,r,a){this.formBuilder=t,this.route=o,this.router=n,this.authenticationService=r,this.userService=a}ngOnInit(){document.body.removeAttribute("data-layout"),document.body.classList.add("auth-body-bg"),this.signupForm=this.formBuilder.group({username:["",l.Validators.required],email:["",[l.Validators.required,l.Validators.email]],password:["",l.Validators.required]})}ngAfterViewInit(){}get f(){return this.signupForm.controls}onSubmit(){this.submitted=!0,!this.signupForm.invalid&&("firebase"===v.c.defaultauth?this.authenticationService.register(this.f.email.value,this.f.password.value).then(t=>{this.successmsg=!0,this.successmsg&&this.router.navigate(["/"])}).catch(t=>{this.error=t||""}):this.userService.register(this.signupForm.value).pipe((0,J.first)()).subscribe(t=>{this.successmsg=!0,this.successmsg&&this.router.navigate(["/account/login"])},t=>{this.error=t||""}))}static \u0275fac=function(o){return new(o||s)(e.\u0275\u0275directiveInject(l.UntypedFormBuilder),e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(O.k),e.\u0275\u0275directiveInject(W))};static \u0275cmp=e.\u0275\u0275defineComponent({type:s,selectors:[["app-signup"]],decls:60,vars:15,consts:[[1,"home-btn","d-none","d-sm-block"],["routerLink",""],[1,"mdi","mdi-home-variant","h2","text-white"],[1,"container-fluid","p-0"],[1,"row","g-0"],[1,"col-lg-4"],[1,"authentication-page-content","p-4","d-flex","align-items-center","min-vh-100"],[1,"w-100"],[1,"row","justify-content-center"],[1,"col-lg-9"],[1,"text-center"],["routerLink","",1,"logo"],["src","assets/images/logo-dark.png","height","20","alt","logo"],[1,"font-size-18","mt-4"],[1,"text-muted"],[1,"p-2","mt-5"],[1,"form-horizontal",3,"ngSubmit","formGroup"],["type","success",3,"dismissible",4,"ngIf"],["type","danger",3,"dismissible",4,"ngIf"],[1,"form-group","auth-form-group-custom","mb-4"],[1,"ri-user-2-line","auti-custom-input-icon"],["for","username"],["type","text","formControlName","username","id","username","placeholder","Enter username",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"ri-mail-line","auti-custom-input-icon"],["for","email"],["type","email","formControlName","email","id","email","placeholder","Email",1,"form-control",3,"ngClass"],[1,"ri-lock-2-line","auti-custom-input-icon"],["for","password"],["type","password","formControlName","password","id","password","placeholder","Password",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-primary","w-md","waves-effect","waves-light"],[1,"mt-4","text-center"],[1,"mb-0"],["href","#",1,"text-primary"],[1,"mt-5","text-center"],["routerLink","/account/login",1,"fw-medium","text-primary"],[1,"col-lg-8"],[1,"authentication-bg"],[1,"bg-overlay"],["type","success",3,"dismissible"],["type","danger",3,"dismissible"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"a",1),e.\u0275\u0275element(2,"i",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div")(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div")(12,"div",10)(13,"div")(14,"a",11),e.\u0275\u0275element(15,"img",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"h4",13),e.\u0275\u0275text(17,"Register account"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"p",14),e.\u0275\u0275text(19,"Get your free ASDAP account now."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",15)(21,"form",16),e.\u0275\u0275listener("ngSubmit",function(){return n.onSubmit()}),e.\u0275\u0275template(22,$,2,1,"ngb-alert",17)(23,z,2,2,"ngb-alert",18),e.\u0275\u0275elementStart(24,"div",19),e.\u0275\u0275element(25,"i",20),e.\u0275\u0275elementStart(26,"label",21),e.\u0275\u0275text(27,"Username"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(28,"input",22),e.\u0275\u0275template(29,q,2,1,"div",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",19),e.\u0275\u0275element(31,"i",24),e.\u0275\u0275elementStart(32,"label",25),e.\u0275\u0275text(33,"Email"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(34,"input",26),e.\u0275\u0275template(35,Y,3,2,"div",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",19),e.\u0275\u0275element(37,"i",27),e.\u0275\u0275elementStart(38,"label",28),e.\u0275\u0275text(39,"Password"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(40,"input",29),e.\u0275\u0275template(41,ee,2,1,"div",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"div",10)(43,"button",30),e.\u0275\u0275text(44,"Register"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(45,"div",31)(46,"p",32),e.\u0275\u0275text(47,"By registering you agree to the ASDAP "),e.\u0275\u0275elementStart(48,"a",33),e.\u0275\u0275text(49,"Terms of Use"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(50,"div",34)(51,"p"),e.\u0275\u0275text(52,"Already have an account ? "),e.\u0275\u0275elementStart(53,"a",35),e.\u0275\u0275text(54," Login"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(55,"p"),e.\u0275\u0275text(56,"\xa9 2024 ASDAP. Powered by CORPDESK"),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275elementStart(57,"div",36)(58,"div",37),e.\u0275\u0275element(59,"div",38),e.\u0275\u0275elementEnd()()()()()),2&o&&(e.\u0275\u0275advance(21),e.\u0275\u0275property("formGroup",n.signupForm),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.successmsg),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.error),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(9,w,n.submitted&&n.f.username.errors)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.submitted&&n.f.username.errors),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(11,w,n.submitted&&n.f.email.errors)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.submitted&&n.f.email.errors),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(13,w,n.submitted&&n.f.password.errors)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.submitted&&n.f.password.errors))},dependencies:[I.NgClass,I.NgIf,m.RouterLink,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,k.NgbAlert]})}return s})();const oe=s=>({"is-invalid":s});function ne(s,h){if(1&s&&(e.\u0275\u0275elementStart(0,"ngb-alert",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("dismissible",!1),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.error)}}function se(s,h){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Email is required"),e.\u0275\u0275elementEnd())}function ie(s,h){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Email must be a valid email address"),e.\u0275\u0275elementEnd())}function re(s,h){if(1&s&&(e.\u0275\u0275elementStart(0,"div",32),e.\u0275\u0275template(1,se,2,0,"div",33)(2,ie,2,0,"div",33),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.f.email.errors.required),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.f.email.errors.email)}}let le=(()=>{class s{formBuilder;route;router;authenticationService;resetForm;submitted=!1;error="";success="";loading=!1;year=(new Date).getFullYear();constructor(t,o,n,r){this.formBuilder=t,this.route=o,this.router=n,this.authenticationService=r}ngOnInit(){document.body.removeAttribute("data-layout"),document.body.classList.add("auth-body-bg"),this.resetForm=this.formBuilder.group({email:["",[l.Validators.required,l.Validators.email]]})}ngAfterViewInit(){}get f(){return this.resetForm.controls}onSubmit(){this.success="",this.submitted=!0,!this.resetForm.invalid&&"firebase"===v.c.defaultauth&&this.authenticationService.resetPassword(this.f.email.value).catch(t=>{this.error=t||""})}static \u0275fac=function(o){return new(o||s)(e.\u0275\u0275directiveInject(l.UntypedFormBuilder),e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(O.k))};static \u0275cmp=e.\u0275\u0275defineComponent({type:s,selectors:[["app-passwordreset"]],decls:44,vars:6,consts:[[1,"home-btn","d-none","d-sm-block"],["routerLink",""],[1,"mdi","mdi-home-variant","h2","text-white"],[1,"container-fluid","p-0"],[1,"row","g-0"],[1,"col-lg-4"],[1,"authentication-page-content","p-4","d-flex","align-items-center","min-vh-100"],[1,"w-100"],[1,"row","justify-content-center"],[1,"col-lg-9"],[1,"text-center"],["routerLink","",1,"logo"],["src","assets/images/logo-dark.png","height","20","alt","logo"],[1,"font-size-18","mt-4"],[1,"text-muted"],[1,"p-2","mt-5"],["role","alert",1,"alert","alert-success","mb-4"],[1,"form-horizontal",3,"ngSubmit","formGroup"],["type","danger",3,"dismissible",4,"ngIf"],[1,"form-group","auth-form-group-custom","mb-4"],[1,"ri-mail-line","auti-custom-input-icon"],["for","email"],["type","email","formControlName","email","id","email","placeholder","Email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"mt-4","text-center"],["type","submit",1,"btn","btn-primary","w-md","waves-effect","waves-light"],[1,"mt-5","text-center"],["routerLink","/account/login",1,"fw-medium","text-primary"],[1,"col-lg-8"],[1,"authentication-bg"],[1,"bg-overlay"],["type","danger",3,"dismissible"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"a",1),e.\u0275\u0275element(2,"i",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div")(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div")(12,"div",10)(13,"div")(14,"a",11),e.\u0275\u0275element(15,"img",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"h4",13),e.\u0275\u0275text(17,"Reset Password"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"p",14),e.\u0275\u0275text(19,"Reset your password to ASDAP."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",15)(21,"div",16),e.\u0275\u0275text(22," Enter your Email and instructions will be sent to you! "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"form",17),e.\u0275\u0275listener("ngSubmit",function(){return n.onSubmit()}),e.\u0275\u0275template(24,ne,2,2,"ngb-alert",18),e.\u0275\u0275elementStart(25,"div",19),e.\u0275\u0275element(26,"i",20),e.\u0275\u0275elementStart(27,"label",21),e.\u0275\u0275text(28,"Email"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(29,"input",22),e.\u0275\u0275template(30,re,3,2,"div",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",24)(32,"button",25),e.\u0275\u0275text(33,"Reset"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(34,"div",26)(35,"p"),e.\u0275\u0275text(36,"Don't have an account ? "),e.\u0275\u0275elementStart(37,"a",27),e.\u0275\u0275text(38," Log in "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"p"),e.\u0275\u0275text(40,"\xa9 2024 ASDAP. Powered by CORPDESK"),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275elementStart(41,"div",28)(42,"div",29),e.\u0275\u0275element(43,"div",30),e.\u0275\u0275elementEnd()()()()()),2&o&&(e.\u0275\u0275advance(23),e.\u0275\u0275property("formGroup",n.resetForm),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.error),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,oe,n.submitted&&n.f.email.errors)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.submitted&&n.f.email.errors))},dependencies:[I.NgClass,I.NgIf,m.RouterLink,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,k.NgbAlert]})}return s})(),H=(()=>{class s{logger;svSio;svWss;svUser;svSess;svMenu;svNav;route;aRoute;svBase;svSioTest;debug=!0;baseModel;resourceGuid=(0,j.v4)();jwtWsToken;homeInvalid=!1;rememberMe=!0;submitted=!1;fg;postData;errMsg;error="";sidebarInitData;socketData=[];header="Welcome!";subheader="Sign in to continue to ASDAP";key;sid;uid;newUser;routParams={queryParams:{token:""},skipLocationChange:!0,replaceUrl:!1};urlLogin="/user/login";urlRegister="/user/register";constructor(t,o,n,r,a,y,f,g,S,p,b){this.logger=t,this.svSio=o,this.svWss=n,this.svUser=r,this.svSess=a,this.svMenu=y,this.svNav=f,this.route=g,this.aRoute=S,this.svBase=p,this.svSioTest=b,this.svSio.env=v.c,this.svSio.initSio(null,null),this.fg=new l.FormGroup({userName:new l.FormControl,password:new l.FormControl,rememberMe:new l.FormControl})}ngOnInit(){this.logger.info("cd-shell/HomeComponent::ngOnInit()/StorageType.CdObjId:",c.StorageType.CdObjId),this.initialize(),this.aRoute.queryParams.subscribe(r=>{this.key=r.key,this.sid=r.sid,this.uid=r.uid,console.log(this.key,this.sid,this.uid),this.setHeader()});const t={storageType:c.StorageType.CdObjId,cdObjId:{appId:localStorage.getItem("appId"),resourceGuid:null,resourceName:"SidebarComponent",ngModule:"SharedModule",jwtToken:localStorage.getItem("accessToken"),socket:null,commTrack:null}};this.logger.info("cd-shell/HomeComponent::ngOnInit()/filter:",t),this.sidebarInitData=this.searchLocalStorage(t),this.logger.info("cd-shell/HomeComponent::ngOnInit()/this.sidebarInitData:",this.sidebarInitData);const o=localStorage.getItem("socketData");if(o){let r=function(a){return"appInit"===a.name?a:null};this.socketData=JSON.parse(o).filter(r),this.logger.info("cd-shell/HomeComponent::ngOnInit()/this.socketData:",this.socketData)}else this.logger.info("Err: socket data is not valid")}initialize(){const t={storageType:c.StorageType.CdObjId,cdObjId:{appId:localStorage.getItem("appId"),resourceGuid:null,resourceName:"HomeComponent",ngModule:"SharedModule",jwtToken:localStorage.getItem("accessToken"),socket:null,commTrack:null}};this.logger.info("cd-shell/HomeComponent::ngOnInit()/filter:",t),this.sidebarInitData=this.searchLocalStorage(t),this.logger.info("cd-shell/HomeComponent::ngOnInit()/this.sidebarInitData:",this.sidebarInitData);const o=localStorage.getItem("socketData");if(o){let r=function(a){return"appInit"===a.name?a:null};this.socketData=JSON.parse(o).filter(r),this.logger.info("cd-shell/HomeComponent::ngOnInit()/this.socketData:",this.socketData)}else this.logger.info("Err: socket data is not valid");this.setAppId()}setAppId(){var t=this;return(0,D.A)(function*(){console.log("cd-shell/HomeComponent::setAppId()/01"),console.log("cd-shell/HomeComponent::setAppId()/this.svSio.socket:",t.svSio.socket),localStorage.removeItem("appId");const o=localStorage.getItem("appId");console.log("cd-shell/HomeComponent::setAppId()/appId:",o);const n=yield t.configPushPayload("register-client","push-registered-client",1e3);console.log("cd-shell/HomeComponent::setAppId()/envl:",n),t.listen("push-registered-client"),t.listen("msg-relayed"),t.listen("push-msg-relayed"),t.listen("push-menu"),t.sendSioMessage(n.pushData.triggerEvent,n)})()}listen(t){this.logger.info("cd-shell/cd-shell/HomeComponent::listen/event:",t),this.svSioTest.sioListen(t).subscribe({next:o=>{switch(console.log("cd-shell/HomeComponent::pushSubscribe()/payLoad:",o),o.pushData.emittEvent){case"push-registered-client":console.log("cd-shell/HomeComponent::listenSecure()/push-registered-client/:payLoad.pushData.emittEvent:",o.pushData.emittEvent),console.log("cd-shell/HomeComponent::listenSecure()/push-registered-client/:payLoad.pushData.triggerEvent:",o.pushData.triggerEvent),console.log("handle push-registered-client event"),this.saveSocket(o);break;case"push-msg-relayed":console.log("cd-shell/HomeComponent::listenSecure()/push-msg-relayed/:payLoad.pushData.emittEvent:",o.pushData.emittEvent),console.log("cd-shell/HomeComponent::listenSecure()/push-msg-relayed/:payLoad.pushData.triggerEvent:",o.pushData.triggerEvent),console.log("handle push-msg-relayed event"),this.updateRelayed(o);break;case"msg-relayed":console.log("cd-shell/HomeComponent::listenSecure()/msg-relayed/:payLoad.pushData.emittEvent:",o.pushData.emittEvent),console.log("cd-shell/HomeComponent::listenSecure()/msg-relayed/:payLoad.pushData.triggerEvent:",o.pushData.triggerEvent),console.log("handle msg-relayed event");break;case"push-menu":console.log("cd-shell/HomeComponent::listenSecure()/push-menu/:payLoad.pushData.emittEvent:",o.pushData.emittEvent),console.log("cd-shell/HomeComponent::listenSecure()/push-menu/:payLoad.pushData.triggerEvent:",o.pushData.triggerEvent),console.log("cd-shell/HomeComponent::listenSecure()/push-menu/:payLoad:",o),console.log("handle push-menu event"),this.routParams.queryParams.token=o.pushData.token}},error:o=>{console.error("cd-shell/cd-shell/HomeComponent::listen/Error receiving message:",o)},complete:()=>{console.log("cd-shell/cd-shell/HomeComponent::listen/Message subscription complete")}})}sendSioMessage(t,o){this.logger.info("cd-shell/HomeComponent::sendSioMessage/triggerEvent:",t),this.logger.info("cd-shell/HomeComponent::sendSioMessage/envl:",o),this.svSioTest.sendMessage(t,o).subscribe({next:n=>{console.log("Message sent successfully:",n)},error:n=>{console.error("Error sending message:",n)},complete:()=>{console.log("Message sending complete")}})}setHeader(){console.log("starting HomeService::setHeader()"),this.key&&this.uid&&this.sid?this.svUser.getUser$({query:{where:{userId:this.uid,activationKey:this.key}}},this.sid).subscribe(o=>{console.log("HomeService::setHeader()/subscribe/res:",o),o.data.length>0&&(this.header=`Congratulations ${o.data[0].userName}, your account is now active.`)}):this.header="Welcome!"}home(t){this.logger.info("starting cd-shell/HomeComponent::home");let o=t.value;const n=t.valid;this.logger.info("cd-shell/HomeComponent::home/01"),this.logger.info("cd-shell/HomeComponent::home/fg:",t),this.logger.info("cd-shell/HomeComponent::home/valid:",n),this.submitted=!0,o=Object.assign({},o,{consumerGuid:v.c.consumerToken});try{this.logger.info("cd-shell/HomeComponent::home/02"),n&&(this.logger.info("cd-shell/HomeComponent::home/03"),this.initSession(o))}catch{this.logger.info("cd-shell/HomeComponent::home/04"),this.errMsg="Something went wrong!!",this.homeInvalid=!0}}initSession(t){this.logger.info("cd-shell/HomeComponent::initSession/01"),this.svUser.auth$(t).subscribe(o=>{if(!0===o.app_state.success){if(this.logger.info("cd-shell/HomeComponent::initSession/res:",JSON.stringify(o)),this.svSess.appState=o.app_state,null!==o.app_state.sess.cd_token&&o.app_state.success){this.logger.info("cd-shell/HomeComponent::initSession/02");const n=this.configPushPayload("home","push-menu",o.data.userData.userId);n.pushData.m=o.data.menuData,this.logger.info("cd-shell/HomeComponent::initSession/envl:",n),"sio"===v.c.wsMode&&(this.logger.info("cd-shell/HomeComponent::initSession/envl:...using sio"),this.svSio.sendPayLoad(n)),"wss"===v.c.wsMode&&(this.logger.info("cd-shell/HomeComponent::initSession/envl:...using wss"),this.svWss.sendMsg(n)),this.svSess.createSess(o,this.svMenu),this.svUser.currentUser={name:`${o.data.userData.userName}`,picture:`${v.c.shellHost}/user-resources/${o.data.userData.userGuid}/avatar-01/a.jpg`},this.svNav.userMenu=[{title:"Profile",link:"/pages/cd-auth/register"},{title:"Log out",link:"/pages/cd-auth/logout"}],this.route.navigate([v.c.initialPage],{queryParams:{token:o.app_state.sess.cd_token},skipLocationChange:!0,replaceUrl:!1})}}else this.errMsg="The userName and password were not valid",this.homeInvalid=!0,this.svSess.logout()})}configPushPayload(t,o,n){console.log("starting cd-user::HomeComponent::configPushPayload()"),this.resourceGuid=this.svBase.getGuid();const r={pushData:{pushGuid:"",m:"",pushRecepients:[],triggerEvent:"",emittEvent:"",token:"",isNotification:null,appSockets:this.socketData,isAppInit:!0,commTrack:{initTime:Number(new Date),relayTime:null,relayed:!1,pushed:!1,pushTime:null,deliveryTime:null,delivered:!1,completed:!1,completedTime:null}},req:null,resp:null};console.log("cd-user::HomeComponent::configPushPayload()/this.resourceGuid:",this.resourceGuid);const a=this.resourceGuid,y={appId:localStorage.getItem("appId"),ngModule:"UserFrontModule",resourceName:"HomeComponent",resourceGuid:this.resourceGuid,jwtToken:this.jwtWsToken,socket:null,socketId:"",commTrack:{initTime:Number(new Date),relayTime:null,relayed:!1,pushed:!1,pushTime:null,deliveryTime:null,delivered:!1,completed:!1,completedTime:null}};localStorage.setItem(a,JSON.stringify(y));const f=[{userId:n,subTypeId:1,cdObjId:y}],g={...r};g.pushData.triggerEvent=t,g.pushData.emittEvent=o;const S={...f[0]};S.subTypeId=1,g.pushData.pushRecepients.push(S);const p={...f[0]};return p.subTypeId=7,this.logger.info("cd-user/HomeComponent::configPushPayload()/uRecepient:",JSON.stringify(p)),p.cdObjId=this.sidebarInitData.value,g.pushData.pushRecepients.push(p),this.logger.info("cd-user/HomeComponent::configPushPayload()/envl:",JSON.stringify(g)),g}saveSocket(t){console.log("cd-shell/HomeComponent::saveSocket()/payLoad:",t);const o=t.pushData.appSockets.filter(function n(r){return"appInit"===r.name?r:null});if(o.length>0){const r=JSON.stringify(o);localStorage.removeItem("socketData"),localStorage.setItem("socketData",r)}}updateRelayed(t){console.log("updateRelayed()/01"),console.log("updateRelayed()/payLoad:",t)}searchLocalStorage(t){this.logger.info("starting cd-shell/HomeComponent::searchLocalStorage()/lcLength:");const o=[],n=localStorage.length;this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/lcLength:",n);for(let i=0;i<localStorage.length;i++){const u=localStorage.key(i);var a=localStorage.getItem(u);this.logger.info("Key: "+u+", Value: "+a);try{if(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/1"),"object"==typeof a){this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/2"),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/v:",a);const C=JSON.parse(a);"success"in C&&(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/3"),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/appState:",C)),"resourceGuid"in C&&(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/4"),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/cdObjId:",C)),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/5"),o.push({key:u,value:JSON.parse(a)})}else this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/typeof (v):",typeof a),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/6"),o.push({key:u,value:JSON.parse(a)})}catch(C){this.logger.info("offending item:",a),this.logger.info("the item is not an object"),this.logger.info("Error:",C)}}this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/lcArr:",o),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/f.cdObjId!.resourceName:",t.cdObjId.resourceName);const f=i=>"object"==typeof i.value,g=i=>"resourceName"in i.value,S=i=>i.value.resourceName===t.cdObjId.resourceName&&i.value.ngModule===t.cdObjId.ngModule,p=(i,u)=>i.value.commTrack.initTime>u.value.commTrack.initTime?i:u;let b=null;try{this.debug?(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/debug=true:"),b=o.filter(i=>"object"==typeof i.value?(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/filteredByObject: d:",i),i):null).filter(i=>"resourceName"in i.value?(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/filteredByResourceNameField: d:",i),i):null).filter(i=>(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/filteredByName: d:",i),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/filteredByName: d.value.resourceName:",i.value.resourceName),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/filteredByName: f.cdObjId!.resourceName:",t.cdObjId.resourceName),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/filteredByName: d.value.ngModule:",i.value.ngModule),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/filteredByName: f.cdObjId!.ngModule:",t.cdObjId.ngModule),i.value.resourceName===t.cdObjId.resourceName&&i.value.ngModule===t.cdObjId.ngModule?i:null)).reduce((i={},u={})=>(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/prev:",i),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/current:",u),i.value.commTrack.initTime>u.value.commTrack.initTime?i:u))):(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/debug=false:"),b=o.filter(f).filter(g).filter(S).reduce(p)),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/ret:",b)}catch(i){this.logger.info("Error:",i)}return b}goTo(t){this.route.navigate([t],{queryParams:{token:this.sid},skipLocationChange:!0,replaceUrl:!1})}onFocus(){this.errMsg=""}static \u0275fac=function(o){return new(o||s)(e.\u0275\u0275directiveInject(N.NGXLogger),e.\u0275\u0275directiveInject(c.SioClientService),e.\u0275\u0275directiveInject(c.WebsocketService),e.\u0275\u0275directiveInject(c.UserService),e.\u0275\u0275directiveInject(c.SessService),e.\u0275\u0275directiveInject(c.MenuService),e.\u0275\u0275directiveInject(c.NavService),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(c.BaseService),e.\u0275\u0275directiveInject(M.a))};static \u0275cmp=e.\u0275\u0275defineComponent({type:s,selectors:[["app-home"]],decls:33,vars:1,consts:[[1,"home-btn","d-none","d-sm-block"],["routerLink",""],[1,"mdi","mdi-home-variant","h2","text-white"],[1,"container-fluid","p-0"],[1,"row","g-0"],[1,"col-lg-4"],[1,"authentication-page-content","p-4","d-flex","align-items-center","min-vh-100"],[1,"w-100"],[1,"row","justify-content-center"],[1,"col-lg-9"],[1,"text-center"],["routerLink","",1,"logo"],["src","assets/images/logo-dark.png","height","20","alt","logo"],[1,"font-size-18","mt-4"],[1,"text-muted"],[1,"fw-medium","text-primary",3,"click"],[1,"p-2","mt-5"],[1,"mt-5","text-center"],[1,"col-lg-8"],[1,"authentication-bg"],[1,"bg-overlay"]],template:function(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"a",1),e.\u0275\u0275element(2,"i",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div")(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div")(12,"div",10)(13,"div")(14,"a",11),e.\u0275\u0275element(15,"img",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"h4",13),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"p",14)(19,"a",15),e.\u0275\u0275listener("click",function(){return n.goTo(n.urlLogin)}),e.\u0275\u0275text(20," Sign-in "),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(21," -in to use ASDAP"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(22,"div",16),e.\u0275\u0275elementStart(23,"div",17)(24,"p"),e.\u0275\u0275text(25,"Don't have an account ? "),e.\u0275\u0275elementStart(26,"a",15),e.\u0275\u0275listener("click",function(){return n.goTo(n.urlRegister)}),e.\u0275\u0275text(27," Register "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"p"),e.\u0275\u0275text(29,"\xa9 2024 ASDAP. Powered by CORPDESK"),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275elementStart(30,"div",18)(31,"div",19),e.\u0275\u0275element(32,"div",20),e.\u0275\u0275elementEnd()()()()()),2&o&&(e.\u0275\u0275advance(17),e.\u0275\u0275textInterpolate(n.header))}})}return s})();const ae=[{path:"",component:H},{path:"home",component:H},{path:"login",component:U},{path:"signup",component:te},{path:"reset-password",component:le}];let ce=(()=>{class s{router;constructor(t){this.router=t,this.monitorRouting()}monitorRouting(){this.router.events.subscribe(t=>{t instanceof m.NavigationStart?console.log("AuthRoutingModule::monitorRouting()/Navigation started to:",t.url,"with state:",t.restoredState):t instanceof m.NavigationEnd?console.log("AuthRoutingModule::monitorRouting()/Navigation ended at:",t.url,"with state:",t.urlAfterRedirects):t instanceof m.NavigationCancel?console.warn("AuthRoutingModule::monitorRouting()/Navigation canceled:",t.url,"with reason:",t.reason):t instanceof m.NavigationError&&console.error("AuthRoutingModule::monitorRouting()/Navigation error:",t.url,t.error)})}static \u0275fac=function(o){return new(o||s)(e.\u0275\u0275inject(m.Router))};static \u0275mod=e.\u0275\u0275defineNgModule({type:s});static \u0275inj=e.\u0275\u0275defineInjector({imports:[m.RouterModule.forChild(ae),m.RouterModule]})}return s})(),de=(()=>{class s{static \u0275fac=function(o){return new(o||s)};static \u0275mod=e.\u0275\u0275defineNgModule({type:s});static \u0275inj=e.\u0275\u0275defineInjector({imports:[I.CommonModule,m.RouterModule,l.FormsModule,l.ReactiveFormsModule,k.NgbAlertModule,T.L,ce,m.RouterModule]})}return s})()}}]);