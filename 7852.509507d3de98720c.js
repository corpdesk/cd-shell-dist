(self.webpackChunkcd_shell=self.webpackChunkcd_shell||[]).push([[7852],{7852:(w,m,c)=>{c.r(m),c.d(m,{CKEditorComponent:()=>F,CKEditorModule:()=>y});var u=c(467),n=c(2264),C=c(2778),E=c(2952),v=c(9354);function p(e,a){}const o=new Array(256).fill(0).map((e,a)=>("0"+a.toString(16)).slice(-2)),f="Lock from Angular integration (@ckeditor/ckeditor5-angular)";let F=(()=>{class e{constructor(t,i){this.config={},this.data="",this.tagName="div",this.disableTwoWayDataBinding=!1,this.ready=new n.EventEmitter,this.change=new n.EventEmitter,this.blur=new n.EventEmitter,this.focus=new n.EventEmitter,this.error=new n.EventEmitter,this.initiallyDisabled=!1,this.isEditorSettingData=!1,this.id=function D(){const e=4294967296*Math.random()>>>0,a=4294967296*Math.random()>>>0,t=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0;return"e"+o[255&e]+o[e>>8&255]+o[e>>16&255]+o[e>>24&255]+o[255&a]+o[a>>8&255]+o[a>>16&255]+o[a>>24&255]+o[255&t]+o[t>>8&255]+o[t>>16&255]+o[t>>24&255]+o[255&i]+o[i>>8&255]+o[i>>16&255]+o[i>>24&255]}(),this.ngZone=i,this.elementRef=t,this.checkVersion()}set disabled(t){this.setDisabledState(t)}get disabled(){return this.editorInstance?this.editorInstance.isReadOnly:this.initiallyDisabled}get editorInstance(){let t=this.editorWatchdog;return this.watchdog&&(t=this.watchdog._watchdogs.get(this.id)),t?t.editor:null}getId(){return this.id}checkVersion(){const{CKEDITOR_VERSION:t}=window;if(!t)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[i]=t.split(".").map(Number);i>=42||t.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}ngOnChanges(t){Object.prototype.hasOwnProperty.call(t,"data")&&t.data&&!t.data.isFirstChange()&&this.writeValue(t.data.currentValue)}ngAfterViewInit(){this.attachToWatchdog()}ngOnDestroy(){var t=this;return(0,u.A)(function*(){t.watchdog?yield t.watchdog.remove(t.id):t.editorWatchdog&&t.editorWatchdog.editor&&(yield t.editorWatchdog.destroy(),t.editorWatchdog=void 0)})()}writeValue(t){null===t&&(t=""),this.editorInstance?(this.isEditorSettingData=!0,this.editorInstance.data.set(t),this.isEditorSettingData=!1):(this.data=t,this.ready.pipe((0,C.first)()).subscribe(i=>{i.data.set(this.data)}))}registerOnChange(t){this.cvaOnChange=t}registerOnTouched(t){this.cvaOnTouched=t}setDisabledState(t){this.editorInstance&&(t?this.editorInstance.enableReadOnlyMode(f):this.editorInstance.disableReadOnlyMode(f)),this.initiallyDisabled=t}attachToWatchdog(){var t=this;const i=(r,d)=>this.ngZone.runOutsideAngular((0,u.A)(function*(){t.elementRef.nativeElement.appendChild(r);const g=yield t.editor.create(r,d);return t.initiallyDisabled&&g.enableReadOnlyMode(f),t.ngZone.run(()=>{t.ready.emit(g)}),t.setUpEditorEvents(g),g})),h=function(){var r=(0,u.A)(function*(d){yield d.destroy(),t.elementRef.nativeElement.removeChild(t.editorElement)});return function(g){return r.apply(this,arguments)}}(),s=r=>{(function O(e){return e.observed||e.observers.length>0})(this.error)&&this.ngZone.run(()=>this.error.emit(r))},l=document.createElement(this.tagName),_=this.getConfig();if(this.editorElement=l,this.watchdog)this.watchdog.add({id:this.id,type:"editor",creator:i,destructor:h,sourceElementOrData:l,config:_}).catch(r=>{s(r)}),this.watchdog.on("itemError",(r,{itemId:d})=>{d===this.id&&s()});else{const r=new this.editor.EditorWatchdog(this.editor,this.editorWatchdogConfig);r.setCreator(i),r.setDestructor(h),r.on("error",s),this.editorWatchdog=r,this.ngZone.runOutsideAngular(()=>{r.create(l,_).catch(d=>{s(d)})})}}getConfig(){if(this.data&&this.config.initialData)throw new Error("Editor data should be provided either using `config.initialData` or `data` properties.");const t={...this.config},i=this.config.initialData||this.data;return i&&(t.initialData=i),t}setUpEditorEvents(t){const h=t.editing.view.document;t.model.document.on("change:data",s=>{this.ngZone.run(()=>{if(!this.disableTwoWayDataBinding){if(this.cvaOnChange&&!this.isEditorSettingData){const l=t.data.get();this.cvaOnChange(l)}this.change.emit({event:s,editor:t})}})}),h.on("focus",s=>{this.ngZone.run(()=>{this.focus.emit({event:s,editor:t})})}),h.on("blur",s=>{this.ngZone.run(()=>{this.cvaOnTouched&&this.cvaOnTouched(),this.blur.emit({event:s,editor:t})})})}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(n.NgZone))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["ckeditor"]],inputs:{editor:"editor",config:"config",data:"data",tagName:"tagName",watchdog:"watchdog",editorWatchdogConfig:"editorWatchdogConfig",disableTwoWayDataBinding:"disableTwoWayDataBinding",disabled:"disabled"},outputs:{ready:"ready",change:"change",blur:"blur",focus:"focus",error:"error"},features:[n.\u0275\u0275ProvidersFeature([{provide:E.NG_VALUE_ACCESSOR,useExisting:(0,n.forwardRef)(()=>e),multi:!0}]),n.\u0275\u0275NgOnChangesFeature],decls:1,vars:0,template:function(t,i){1&t&&n.\u0275\u0275template(0,p,0,0,"ng-template")},encapsulation:2}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[E.FormsModule,v.CommonModule]]}),e})()}}]);