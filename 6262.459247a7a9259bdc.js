(self.webpackChunkcd_shell=self.webpackChunkcd_shell||[]).push([[6262],{6262:(V,w,m)=>{m.r(w),m.d(w,{AccountModule:()=>g});var y=m(35228),l=m(37011),u=m(87675);const E=[{path:"auth",loadChildren:()=>Promise.resolve().then(m.bind(m,64769)).then(d=>d.AuthModule)}];class N{constructor(c){this.router=c,this.monitorRouting()}monitorRouting(){this.router.events.subscribe(c=>{c instanceof l.NavigationStart?console.log("AccountRoutingModule::monitorRouting()/Navigation started to:",c.url):c instanceof l.NavigationEnd?console.log("AccountRoutingModule::monitorRouting()/Navigation ended at:",c.url):c instanceof l.NavigationCancel?console.warn("AccountRoutingModule::monitorRouting()/Navigation canceled:",c.url):c instanceof l.NavigationError&&console.error("AccountRoutingModule::monitorRouting()/Navigation error:",c.url,c.error)})}}N.\u0275fac=function(c){return new(c||N)(u.\u0275\u0275inject(l.Router))},N.\u0275mod=u.\u0275\u0275defineNgModule({type:N}),N.\u0275inj=u.\u0275\u0275defineInjector({imports:[l.RouterModule.forChild(E),l.RouterModule]});var x=m(64769);class g{}g.\u0275fac=function(c){return new(c||g)},g.\u0275mod=u.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=u.\u0275\u0275defineInjector({imports:[y.CommonModule,N,l.RouterModule,x.AuthModule]})},64769:(V,w,m)=>{m.r(w),m.d(w,{AuthModule:()=>P});var y=m(35228),l=m(30533),u=m(37011),E=m(76380),N=m(54171),x=m(15861),g=m(81042),d=m(23304),c=m(41115),e=m(87675),G=m(55250),U=m(95401);function h(s,o){if(1&s&&(e.\u0275\u0275elementStart(0,"ngb-alert",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("dismissible",!1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.error)}}function f(s,o){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"userName is required"),e.\u0275\u0275elementEnd())}function D(s,o){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"userName must be a valid userName address"),e.\u0275\u0275elementEnd())}function j(s,o){if(1&s&&(e.\u0275\u0275elementStart(0,"div",39),e.\u0275\u0275template(1,f,2,0,"div",40),e.\u0275\u0275template(2,D,2,0,"div",40),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.loginInvalid),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.loginInvalid)}}function M(s,o){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Password is required"),e.\u0275\u0275elementEnd())}function W(s,o){if(1&s&&(e.\u0275\u0275elementStart(0,"div",39),e.\u0275\u0275template(1,M,2,0,"div",40),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.loginInvalid)}}const J=function(s){return{"is-invalid":s}};class A{constructor(o,t,i,r,a,k,C,v,b,S,I){this.logger=o,this.svSio=t,this.svWss=i,this.svUser=r,this.svSess=a,this.svMenu=k,this.svNav=C,this.route=v,this.aRoute=b,this.svBase=S,this.svSioTest=I,this.debug=!0,this.resourceGuid=(0,g.Z)(),this.loginInvalid=!1,this.rememberMe=!0,this.submitted=!1,this.error="",this.socketData=[],this.header="Welcome!",this.subheader="Sign in to continue to ASDAP",this.routParams={queryParams:{token:""},skipLocationChange:!0,replaceUrl:!1},this.svSio.env=c.N,this.svSio.initSio(null,null),this.fg=new l.FormGroup({userName:new l.FormControl,password:new l.FormControl,rememberMe:new l.FormControl})}ngOnInit(){this.logger.info("cd-shell/LoginComponent::ngOnInit()/StorageType.CdObjId:",d.StorageType.CdObjId),this.initialize(),this.aRoute.queryParams.subscribe(r=>{this.key=r.key,this.sid=r.sid,this.uid=r.uid,console.log(this.key,this.sid,this.uid),this.setHeader()});const o={storageType:d.StorageType.CdObjId,cdObjId:{appId:localStorage.getItem("appId"),resourceGuid:null,resourceName:"SidebarComponent",ngModule:"SharedModule",jwtToken:localStorage.getItem("accessToken"),socket:null,commTrack:null}};this.logger.info("cd-shell/LoginComponent::ngOnInit()/filter:",o),this.sidebarInitData=this.searchLocalStorage(o),this.logger.info("cd-shell/LoginComponent::ngOnInit()/this.sidebarInitData:",this.sidebarInitData);const t=localStorage.getItem("socketData");if(t){let r=function(a){return"appInit"===a.name?a:null};this.socketData=JSON.parse(t).filter(r),this.logger.info("cd-shell/LoginComponent::ngOnInit()/this.socketData:",this.socketData)}else this.logger.info("Err: socket data is not valid")}initialize(){const o={storageType:d.StorageType.CdObjId,cdObjId:{appId:localStorage.getItem("appId"),resourceGuid:null,resourceName:"LoginComponent",ngModule:"SharedModule",jwtToken:localStorage.getItem("accessToken"),socket:null,commTrack:null}};this.logger.info("cd-shell/LoginComponent::ngOnInit()/filter:",o),this.sidebarInitData=this.searchLocalStorage(o),this.logger.info("cd-shell/LoginComponent::ngOnInit()/this.sidebarInitData:",this.sidebarInitData);const t=localStorage.getItem("socketData");if(t){let r=function(a){return"appInit"===a.name?a:null};this.socketData=JSON.parse(t).filter(r),this.logger.info("cd-shell/LoginComponent::ngOnInit()/this.socketData:",this.socketData)}else this.logger.info("Err: socket data is not valid");this.setAppId()}setAppId(){var o=this;return(0,x.Z)(function*(){console.log("cd-shell/LoginComponent::setAppId()/01"),console.log("cd-shell/LoginComponent::setAppId()/this.svSio.socket:",o.svSio.socket),localStorage.removeItem("appId");const t=localStorage.getItem("appId");console.log("cd-shell/LoginComponent::setAppId()/appId:",t);const i=yield o.configPushPayload("register-client","push-registered-client",1e3);console.log("cd-shell/LoginComponent::setAppId()/envl:",i),o.listen("push-registered-client"),o.listen("msg-relayed"),o.listen("push-msg-relayed"),o.listen("push-menu"),o.sendSioMessage(i.pushData.triggerEvent,i)})()}listen(o){this.logger.info("cd-shell/cd-shell/LoginComponent::listen/event:",o),this.svSioTest.sioListen(o).subscribe({next:t=>{switch(console.log("cd-shell/LoginComponent::pushSubscribe()/payLoad:",t),t.pushData.emittEvent){case"push-registered-client":console.log("cd-shell/LoginComponent::listenSecure()/push-registered-client/:payLoad.pushData.emittEvent:",t.pushData.emittEvent),console.log("cd-shell/LoginComponent::listenSecure()/push-registered-client/:payLoad.pushData.triggerEvent:",t.pushData.triggerEvent),console.log("handle push-registered-client event"),this.saveSocket(t);break;case"push-msg-relayed":console.log("cd-shell/LoginComponent::listenSecure()/push-msg-relayed/:payLoad.pushData.emittEvent:",t.pushData.emittEvent),console.log("cd-shell/LoginComponent::listenSecure()/push-msg-relayed/:payLoad.pushData.triggerEvent:",t.pushData.triggerEvent),console.log("handle push-msg-relayed event"),this.updateRelayed(t);break;case"msg-relayed":console.log("cd-shell/LoginComponent::listenSecure()/msg-relayed/:payLoad.pushData.emittEvent:",t.pushData.emittEvent),console.log("cd-shell/LoginComponent::listenSecure()/msg-relayed/:payLoad.pushData.triggerEvent:",t.pushData.triggerEvent),console.log("handle msg-relayed event");break;case"push-menu":console.log("cd-shell/LoginComponent::listenSecure()/push-menu/:payLoad.pushData.emittEvent:",t.pushData.emittEvent),console.log("cd-shell/LoginComponent::listenSecure()/push-menu/:payLoad.pushData.triggerEvent:",t.pushData.triggerEvent),console.log("cd-shell/LoginComponent::listenSecure()/push-menu/:payLoad:",t),console.log("handle push-menu event"),this.routParams.queryParams.token=t.pushData.token}},error:t=>{console.error("cd-shell/cd-shell/LoginComponent::listen/Error receiving message:",t)},complete:()=>{console.log("cd-shell/cd-shell/LoginComponent::listen/Message subscription complete")}})}sendSioMessage(o,t){this.logger.info("cd-shell/LoginComponent::sendSioMessage/triggerEvent:",o),this.logger.info("cd-shell/LoginComponent::sendSioMessage/envl:",t),this.svSioTest.sendMessage(o,t).subscribe({next:i=>{console.log("Message sent successfully:",i)},error:i=>{console.error("Error sending message:",i)},complete:()=>{console.log("Message sending complete")}})}setHeader(){console.log("starting LoginService::setHeader()"),this.key&&this.uid&&this.sid?this.svUser.getUser$({query:{where:{userId:this.uid,activationKey:this.key}}},this.sid).subscribe(t=>{console.log("LoginService::setHeader()/subscribe/res:",t),t.data.length>0&&(this.header=`Congratulations ${t.data[0].userName}, your account is now active.`)}):this.header="Welcome!"}login(o){this.logger.info("starting cd-shell/LoginComponent::login");let t=o.value;const i=o.valid;this.logger.info("cd-shell/LoginComponent::login/01"),this.logger.info("cd-shell/LoginComponent::login/fg:",o),this.logger.info("cd-shell/LoginComponent::login/valid:",i),this.submitted=!0,t=Object.assign({},t,{consumerGuid:c.N.consumerToken});try{this.logger.info("cd-shell/LoginComponent::login/02"),i&&(this.logger.info("cd-shell/LoginComponent::login/03"),this.initSession(t))}catch{this.logger.info("cd-shell/LoginComponent::login/04"),this.errMsg="Something went wrong!!",this.loginInvalid=!0}}initSession(o){this.logger.info("cd-shell/LoginComponent::initSession/01"),this.svUser.auth$(o).subscribe(t=>{if(!0===t.app_state.success){if(this.logger.info("cd-shell/LoginComponent::initSession/res:",JSON.stringify(t)),this.svSess.appState=t.app_state,null!==t.app_state.sess.cd_token&&t.app_state.success){this.logger.info("cd-shell/LoginComponent::initSession/02");const i=this.configPushPayload("login","push-menu",t.data.userData.userId);i.pushData.m=t.data.menuData,this.logger.info("cd-shell/LoginComponent::initSession/envl:",i),"sio"===c.N.wsMode&&(this.logger.info("cd-shell/LoginComponent::initSession/envl:...using sio"),this.svSio.sendPayLoad(i)),"wss"===c.N.wsMode&&(this.logger.info("cd-shell/LoginComponent::initSession/envl:...using wss"),this.svWss.sendMsg(i)),this.svSess.createSess(t,this.svMenu),this.svUser.currentUser={name:`${t.data.userData.userName}`,picture:`${c.N.shellHost}/user-resources/${t.data.userData.userGuid}/avatar-01/a.jpg`},this.svNav.userMenu=[{title:"Profile",link:"/pages/cd-auth/register"},{title:"Log out",link:"/pages/cd-auth/logout"}];const r={queryParams:{token:t.app_state.sess.cd_token},skipLocationChange:!0,replaceUrl:!1};this.route.navigate(["/dashboard"],r),this.route.navigate([c.N.initialPage],r)}}else this.errMsg="The userName and password were not valid",this.loginInvalid=!0,this.svSess.logout()})}configPushPayload(o,t,i){console.log("starting cd-user::LoginComponent::configPushPayload()"),this.resourceGuid=this.svBase.getGuid();const r={pushData:{pushGuid:"",m:"",pushRecepients:[],triggerEvent:"",emittEvent:"",token:"",isNotification:null,appSockets:this.socketData,isAppInit:!0,commTrack:{initTime:Number(new Date),relayTime:null,relayed:!1,pushed:!1,pushTime:null,deliveryTime:null,delivered:!1,completed:!1,completedTime:null}},req:null,resp:null};console.log("cd-user::LoginComponent::configPushPayload()/this.resourceGuid:",this.resourceGuid);const a=this.resourceGuid,k={appId:localStorage.getItem("appId"),ngModule:"UserFrontModule",resourceName:"LoginComponent",resourceGuid:this.resourceGuid,jwtToken:this.jwtWsToken,socket:null,socketId:"",commTrack:{initTime:Number(new Date),relayTime:null,relayed:!1,pushed:!1,pushTime:null,deliveryTime:null,delivered:!1,completed:!1,completedTime:null}};localStorage.setItem(a,JSON.stringify(k));const C=[{userId:i,subTypeId:1,cdObjId:k}],v={...r};v.pushData.triggerEvent=o,v.pushData.emittEvent=t;const b={...C[0]};b.subTypeId=1,v.pushData.pushRecepients.push(b);const S={...C[0]};return S.subTypeId=7,this.logger.info("cd-user/LoginComponent::configPushPayload()/uRecepient:",JSON.stringify(S)),S.cdObjId=this.sidebarInitData.value,v.pushData.pushRecepients.push(S),this.logger.info("cd-user/LoginComponent::configPushPayload()/envl:",JSON.stringify(v)),v}saveSocket(o){console.log("cd-shell/LoginComponent::saveSocket()/payLoad:",o);const t=o.pushData.appSockets.filter(function i(r){return"appInit"===r.name?r:null});if(t.length>0){const r=JSON.stringify(t);localStorage.removeItem("socketData"),localStorage.setItem("socketData",r)}}updateRelayed(o){console.log("updateRelayed()/01"),console.log("updateRelayed()/payLoad:",o)}searchLocalStorage(o){this.logger.info("starting cd-shell/LoginComponent::searchLocalStorage()/lcLength:");const t=[],i=localStorage.length;this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/lcLength:",i);for(let n=0;n<localStorage.length;n++){const p=localStorage.key(n);var a=localStorage.getItem(p);this.logger.info("Key: "+p+", Value: "+a);try{if(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/1"),"object"==typeof a){this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/2"),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/v:",a);const L=JSON.parse(a);"success"in L&&(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/3"),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/appState:",L)),"resourceGuid"in L&&(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/4"),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/cdObjId:",L)),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/5"),t.push({key:p,value:JSON.parse(a)})}else this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/typeof (v):",typeof a),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/6"),t.push({key:p,value:JSON.parse(a)})}catch(L){this.logger.info("offending item:",a),this.logger.info("the item is not an object"),this.logger.info("Error:",L)}}this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/lcArr:",t),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/f.cdObjId!.resourceName:",o.cdObjId.resourceName);const C=n=>"object"==typeof n.value,v=n=>"resourceName"in n.value,b=n=>n.value.resourceName===o.cdObjId.resourceName&&n.value.ngModule===o.cdObjId.ngModule,S=(n,p)=>n.value.commTrack.initTime>p.value.commTrack.initTime?n:p;let I=null;try{this.debug?(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/debug=true:"),I=t.filter(n=>"object"==typeof n.value?(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/filteredByObject: d:",n),n):null).filter(n=>"resourceName"in n.value?(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/filteredByResourceNameField: d:",n),n):null).filter(n=>(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/filteredByName: d:",n),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/filteredByName: d.value.resourceName:",n.value.resourceName),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/filteredByName: f.cdObjId!.resourceName:",o.cdObjId.resourceName),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/filteredByName: d.value.ngModule:",n.value.ngModule),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/filteredByName: f.cdObjId!.ngModule:",o.cdObjId.ngModule),n.value.resourceName===o.cdObjId.resourceName&&n.value.ngModule===o.cdObjId.ngModule?n:null)).reduce((n={},p={})=>(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/prev:",n),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/current:",p),n.value.commTrack.initTime>p.value.commTrack.initTime?n:p))):(this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/debug=false:"),I=t.filter(C).filter(v).filter(b).reduce(S)),this.logger.info("cd-shell/LoginComponent::searchLocalStorage()/ret:",I)}catch(n){this.logger.info("Error:",n)}return I}onFocus(){this.errMsg=""}}A.\u0275fac=function(o){return new(o||A)(e.\u0275\u0275directiveInject(G.NGXLogger),e.\u0275\u0275directiveInject(d.SioClientService),e.\u0275\u0275directiveInject(d.WebsocketService),e.\u0275\u0275directiveInject(d.UserService),e.\u0275\u0275directiveInject(d.SessService),e.\u0275\u0275directiveInject(d.MenuService),e.\u0275\u0275directiveInject(d.NavService),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(u.ActivatedRoute),e.\u0275\u0275directiveInject(d.BaseService),e.\u0275\u0275directiveInject(U.h))},A.\u0275cmp=e.\u0275\u0275defineComponent({type:A,selectors:[["app-login"]],decls:56,vars:12,consts:[[1,"home-btn","d-none","d-sm-block"],["routerLink",""],[1,"mdi","mdi-home-variant","h2","text-white"],[1,"container-fluid","p-0"],[1,"row","g-0"],[1,"col-lg-4"],[1,"authentication-page-content","p-4","d-flex","align-items-center","min-vh-100"],[1,"w-100"],[1,"row","justify-content-center"],[1,"col-lg-9"],[1,"text-center"],["routerLink","",1,"logo"],["src","assets/images/logo-dark.png","height","20","alt","logo"],[1,"font-size-18","mt-4"],[1,"text-muted"],[1,"p-2","mt-5"],[1,"form-horizontal",3,"formGroup","ngSubmit"],["type","danger",3,"dismissible",4,"ngIf"],[1,"form-group","auth-form-group-custom","mb-4"],[1,"ri-user-2-line","auti-custom-input-icon"],["for","userName"],["formControlName","userName","id","userName","placeholder","userName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"ri-lock-2-line","auti-custom-input-icon"],["for","password"],["type","password","formControlName","password","id","password","placeholder","Password",1,"form-control",3,"ngClass"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","customControlInline",1,"custom-control-input"],["for","customControlInline",1,"custom-control-label"],[1,"mt-4","text-center"],["type","submit",1,"btn","btn-primary","w-md","waves-effect","waves-light"],["routerLink","/account/reset-password",1,"text-muted"],[1,"mdi","mdi-lock","mr-1"],[1,"mt-5","text-center"],["routerLink","/account/signup",1,"fw-medium","text-primary"],[1,"col-lg-8"],[1,"authentication-bg"],[1,"bg-overlay"],["type","danger",3,"dismissible"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(o,t){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"a",1),e.\u0275\u0275element(2,"i",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div")(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div")(12,"div",10)(13,"div")(14,"a",11),e.\u0275\u0275element(15,"img",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"h4",13),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"p",14),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",15)(21,"form",16),e.\u0275\u0275listener("ngSubmit",function(){return t.login(t.fg)}),e.\u0275\u0275template(22,h,2,2,"ngb-alert",17),e.\u0275\u0275elementStart(23,"div",18),e.\u0275\u0275element(24,"i",19),e.\u0275\u0275elementStart(25,"label",20),e.\u0275\u0275text(26,"User Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"input",21),e.\u0275\u0275template(28,j,3,2,"div",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"div",18),e.\u0275\u0275element(30,"i",23),e.\u0275\u0275elementStart(31,"label",24),e.\u0275\u0275text(32,"Password"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(33,"input",25),e.\u0275\u0275template(34,W,2,1,"div",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",26),e.\u0275\u0275element(36,"input",27),e.\u0275\u0275elementStart(37,"label",28),e.\u0275\u0275text(38,"Remember me"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"div",29)(40,"button",30),e.\u0275\u0275text(41,"Log In"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"div",29)(43,"a",31),e.\u0275\u0275element(44,"i",32),e.\u0275\u0275text(45," Forgot your password?"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(46,"div",33)(47,"p"),e.\u0275\u0275text(48,"Don't have an account ? "),e.\u0275\u0275elementStart(49,"a",34),e.\u0275\u0275text(50," Register "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"p"),e.\u0275\u0275text(52,"\xa9 2024 ASDAP. Powered by CORPDESK"),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275elementStart(53,"div",35)(54,"div",36),e.\u0275\u0275element(55,"div",37),e.\u0275\u0275elementEnd()()()()()),2&o&&(e.\u0275\u0275advance(17),e.\u0275\u0275textInterpolate(t.header),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.subheader),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",t.fg),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.error),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,J,t.submitted&&t.loginInvalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.submitted&&t.loginInvalid),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(10,J,t.submitted&&t.loginInvalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.submitted&&t.loginInvalid))},dependencies:[y.NgClass,y.NgIf,u.RouterLink,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,E.NgbAlert]});var z=m(65893),$=m(52412),K=m(38697);class O{constructor(o){this.http=o}getAll(){return this.http.get("/api/login")}register(o){return this.http.post("/users/register",o)}}function q(s,o){1&s&&(e.\u0275\u0275elementStart(0,"ngb-alert",39),e.\u0275\u0275text(1,"Registeration successfull. "),e.\u0275\u0275elementEnd()),2&s&&e.\u0275\u0275property("dismissible",!1)}function Z(s,o){if(1&s&&(e.\u0275\u0275elementStart(0,"ngb-alert",40),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("dismissible",!1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.error)}}function Q(s,o){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Userame is required"),e.\u0275\u0275elementEnd())}function X(s,o){if(1&s&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275template(1,Q,2,0,"div",42),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.f.username.errors.required)}}function Y(s,o){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Email is required"),e.\u0275\u0275elementEnd())}function ee(s,o){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Email must be a valid email address"),e.\u0275\u0275elementEnd())}function te(s,o){if(1&s&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275template(1,Y,2,0,"div",42),e.\u0275\u0275template(2,ee,2,0,"div",42),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.f.email.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.f.email.errors.email)}}function oe(s,o){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Password is required"),e.\u0275\u0275elementEnd())}function ne(s,o){if(1&s&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275template(1,oe,2,0,"div",42),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.f.password.errors.required)}}O.\u0275fac=function(o){return new(o||O)(e.\u0275\u0275inject(K.HttpClient))},O.\u0275prov=e.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac,providedIn:"root"});const B=function(s){return{"is-invalid":s}};class _{constructor(o,t,i,r,a){this.formBuilder=o,this.route=t,this.router=i,this.authenticationService=r,this.userService=a,this.submitted=!1,this.error="",this.successmsg=!1,this.year=(new Date).getFullYear()}ngOnInit(){document.body.removeAttribute("data-layout"),document.body.classList.add("auth-body-bg"),this.signupForm=this.formBuilder.group({username:["",l.Validators.required],email:["",[l.Validators.required,l.Validators.email]],password:["",l.Validators.required]})}ngAfterViewInit(){}get f(){return this.signupForm.controls}onSubmit(){this.submitted=!0,!this.signupForm.invalid&&("firebase"===c.N.defaultauth?this.authenticationService.register(this.f.email.value,this.f.password.value).then(o=>{this.successmsg=!0,this.successmsg&&this.router.navigate(["/"])}).catch(o=>{this.error=o||""}):this.userService.register(this.signupForm.value).pipe((0,z.first)()).subscribe(o=>{this.successmsg=!0,this.successmsg&&this.router.navigate(["/account/login"])},o=>{this.error=o||""}))}}function se(s,o){if(1&s&&(e.\u0275\u0275elementStart(0,"ngb-alert",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("dismissible",!1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.error)}}function ie(s,o){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Email is required"),e.\u0275\u0275elementEnd())}function re(s,o){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Email must be a valid email address"),e.\u0275\u0275elementEnd())}function le(s,o){if(1&s&&(e.\u0275\u0275elementStart(0,"div",32),e.\u0275\u0275template(1,ie,2,0,"div",33),e.\u0275\u0275template(2,re,2,0,"div",33),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.f.email.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.f.email.errors.email)}}_.\u0275fac=function(o){return new(o||_)(e.\u0275\u0275directiveInject(l.UntypedFormBuilder),e.\u0275\u0275directiveInject(u.ActivatedRoute),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject($.$),e.\u0275\u0275directiveInject(O))},_.\u0275cmp=e.\u0275\u0275defineComponent({type:_,selectors:[["app-signup"]],decls:60,vars:15,consts:[[1,"home-btn","d-none","d-sm-block"],["routerLink",""],[1,"mdi","mdi-home-variant","h2","text-white"],[1,"container-fluid","p-0"],[1,"row","g-0"],[1,"col-lg-4"],[1,"authentication-page-content","p-4","d-flex","align-items-center","min-vh-100"],[1,"w-100"],[1,"row","justify-content-center"],[1,"col-lg-9"],[1,"text-center"],["routerLink","",1,"logo"],["src","assets/images/logo-dark.png","height","20","alt","logo"],[1,"font-size-18","mt-4"],[1,"text-muted"],[1,"p-2","mt-5"],[1,"form-horizontal",3,"formGroup","ngSubmit"],["type","success",3,"dismissible",4,"ngIf"],["type","danger",3,"dismissible",4,"ngIf"],[1,"form-group","auth-form-group-custom","mb-4"],[1,"ri-user-2-line","auti-custom-input-icon"],["for","username"],["type","text","formControlName","username","id","username","placeholder","Enter username",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"ri-mail-line","auti-custom-input-icon"],["for","email"],["type","email","formControlName","email","id","email","placeholder","Email",1,"form-control",3,"ngClass"],[1,"ri-lock-2-line","auti-custom-input-icon"],["for","password"],["type","password","formControlName","password","id","password","placeholder","Password",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-primary","w-md","waves-effect","waves-light"],[1,"mt-4","text-center"],[1,"mb-0"],["href","#",1,"text-primary"],[1,"mt-5","text-center"],["routerLink","/account/login",1,"fw-medium","text-primary"],[1,"col-lg-8"],[1,"authentication-bg"],[1,"bg-overlay"],["type","success",3,"dismissible"],["type","danger",3,"dismissible"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(o,t){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"a",1),e.\u0275\u0275element(2,"i",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div")(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div")(12,"div",10)(13,"div")(14,"a",11),e.\u0275\u0275element(15,"img",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"h4",13),e.\u0275\u0275text(17,"Register account"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"p",14),e.\u0275\u0275text(19,"Get your free ASDAP account now."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",15)(21,"form",16),e.\u0275\u0275listener("ngSubmit",function(){return t.onSubmit()}),e.\u0275\u0275template(22,q,2,1,"ngb-alert",17),e.\u0275\u0275template(23,Z,2,2,"ngb-alert",18),e.\u0275\u0275elementStart(24,"div",19),e.\u0275\u0275element(25,"i",20),e.\u0275\u0275elementStart(26,"label",21),e.\u0275\u0275text(27,"Username"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(28,"input",22),e.\u0275\u0275template(29,X,2,1,"div",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",19),e.\u0275\u0275element(31,"i",24),e.\u0275\u0275elementStart(32,"label",25),e.\u0275\u0275text(33,"Email"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(34,"input",26),e.\u0275\u0275template(35,te,3,2,"div",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",19),e.\u0275\u0275element(37,"i",27),e.\u0275\u0275elementStart(38,"label",28),e.\u0275\u0275text(39,"Password"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(40,"input",29),e.\u0275\u0275template(41,ne,2,1,"div",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"div",10)(43,"button",30),e.\u0275\u0275text(44,"Register"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(45,"div",31)(46,"p",32),e.\u0275\u0275text(47,"By registering you agree to the ASDAP "),e.\u0275\u0275elementStart(48,"a",33),e.\u0275\u0275text(49,"Terms of Use"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(50,"div",34)(51,"p"),e.\u0275\u0275text(52,"Already have an account ? "),e.\u0275\u0275elementStart(53,"a",35),e.\u0275\u0275text(54," Login"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(55,"p"),e.\u0275\u0275text(56,"\xa9 2024 ASDAP. Powered by CORPDESK"),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275elementStart(57,"div",36)(58,"div",37),e.\u0275\u0275element(59,"div",38),e.\u0275\u0275elementEnd()()()()()),2&o&&(e.\u0275\u0275advance(21),e.\u0275\u0275property("formGroup",t.signupForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.successmsg),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.error),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(9,B,t.submitted&&t.f.username.errors)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.submitted&&t.f.username.errors),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(11,B,t.submitted&&t.f.email.errors)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.submitted&&t.f.email.errors),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(13,B,t.submitted&&t.f.password.errors)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.submitted&&t.f.password.errors))},dependencies:[y.NgClass,y.NgIf,u.RouterLink,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,E.NgbAlert]});const ae=function(s){return{"is-invalid":s}};class F{constructor(o,t,i,r){this.formBuilder=o,this.route=t,this.router=i,this.authenticationService=r,this.submitted=!1,this.error="",this.success="",this.loading=!1,this.year=(new Date).getFullYear()}ngOnInit(){document.body.removeAttribute("data-layout"),document.body.classList.add("auth-body-bg"),this.resetForm=this.formBuilder.group({email:["",[l.Validators.required,l.Validators.email]]})}ngAfterViewInit(){}get f(){return this.resetForm.controls}onSubmit(){this.success="",this.submitted=!0,!this.resetForm.invalid&&"firebase"===c.N.defaultauth&&this.authenticationService.resetPassword(this.f.email.value).catch(o=>{this.error=o||""})}}F.\u0275fac=function(o){return new(o||F)(e.\u0275\u0275directiveInject(l.UntypedFormBuilder),e.\u0275\u0275directiveInject(u.ActivatedRoute),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject($.$))},F.\u0275cmp=e.\u0275\u0275defineComponent({type:F,selectors:[["app-passwordreset"]],decls:44,vars:6,consts:[[1,"home-btn","d-none","d-sm-block"],["routerLink",""],[1,"mdi","mdi-home-variant","h2","text-white"],[1,"container-fluid","p-0"],[1,"row","g-0"],[1,"col-lg-4"],[1,"authentication-page-content","p-4","d-flex","align-items-center","min-vh-100"],[1,"w-100"],[1,"row","justify-content-center"],[1,"col-lg-9"],[1,"text-center"],["routerLink","",1,"logo"],["src","assets/images/logo-dark.png","height","20","alt","logo"],[1,"font-size-18","mt-4"],[1,"text-muted"],[1,"p-2","mt-5"],["role","alert",1,"alert","alert-success","mb-4"],[1,"form-horizontal",3,"formGroup","ngSubmit"],["type","danger",3,"dismissible",4,"ngIf"],[1,"form-group","auth-form-group-custom","mb-4"],[1,"ri-mail-line","auti-custom-input-icon"],["for","email"],["type","email","formControlName","email","id","email","placeholder","Email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"mt-4","text-center"],["type","submit",1,"btn","btn-primary","w-md","waves-effect","waves-light"],[1,"mt-5","text-center"],["routerLink","/account/login",1,"fw-medium","text-primary"],[1,"col-lg-8"],[1,"authentication-bg"],[1,"bg-overlay"],["type","danger",3,"dismissible"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(o,t){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"a",1),e.\u0275\u0275element(2,"i",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div")(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div")(12,"div",10)(13,"div")(14,"a",11),e.\u0275\u0275element(15,"img",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"h4",13),e.\u0275\u0275text(17,"Reset Password"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"p",14),e.\u0275\u0275text(19,"Reset your password to ASDAP."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",15)(21,"div",16),e.\u0275\u0275text(22," Enter your Email and instructions will be sent to you! "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"form",17),e.\u0275\u0275listener("ngSubmit",function(){return t.onSubmit()}),e.\u0275\u0275template(24,se,2,2,"ngb-alert",18),e.\u0275\u0275elementStart(25,"div",19),e.\u0275\u0275element(26,"i",20),e.\u0275\u0275elementStart(27,"label",21),e.\u0275\u0275text(28,"Email"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(29,"input",22),e.\u0275\u0275template(30,le,3,2,"div",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",24)(32,"button",25),e.\u0275\u0275text(33,"Reset"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(34,"div",26)(35,"p"),e.\u0275\u0275text(36,"Don't have an account ? "),e.\u0275\u0275elementStart(37,"a",27),e.\u0275\u0275text(38," Log in "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"p"),e.\u0275\u0275text(40,"\xa9 2024 ASDAP. Powered by CORPDESK"),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275elementStart(41,"div",28)(42,"div",29),e.\u0275\u0275element(43,"div",30),e.\u0275\u0275elementEnd()()()()()),2&o&&(e.\u0275\u0275advance(23),e.\u0275\u0275property("formGroup",t.resetForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.error),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,ae,t.submitted&&t.f.email.errors)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.submitted&&t.f.email.errors))},dependencies:[y.NgClass,y.NgIf,u.RouterLink,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,E.NgbAlert]});class H{constructor(o,t,i,r,a,k,C,v,b,S,I){this.logger=o,this.svSio=t,this.svWss=i,this.svUser=r,this.svSess=a,this.svMenu=k,this.svNav=C,this.route=v,this.aRoute=b,this.svBase=S,this.svSioTest=I,this.debug=!0,this.resourceGuid=(0,g.Z)(),this.homeInvalid=!1,this.rememberMe=!0,this.submitted=!1,this.error="",this.socketData=[],this.header="Welcome!",this.subheader="Sign in to continue to ASDAP",this.routParams={queryParams:{token:""},skipLocationChange:!0,replaceUrl:!1},this.urlLogin="/user/login",this.urlRegister="/user/register",this.svSio.env=c.N,this.svSio.initSio(null,null),this.fg=new l.FormGroup({userName:new l.FormControl,password:new l.FormControl,rememberMe:new l.FormControl})}ngOnInit(){this.logger.info("cd-shell/HomeComponent::ngOnInit()/StorageType.CdObjId:",d.StorageType.CdObjId),this.initialize(),this.aRoute.queryParams.subscribe(r=>{this.key=r.key,this.sid=r.sid,this.uid=r.uid,console.log(this.key,this.sid,this.uid),this.setHeader()});const o={storageType:d.StorageType.CdObjId,cdObjId:{appId:localStorage.getItem("appId"),resourceGuid:null,resourceName:"SidebarComponent",ngModule:"SharedModule",jwtToken:localStorage.getItem("accessToken"),socket:null,commTrack:null}};this.logger.info("cd-shell/HomeComponent::ngOnInit()/filter:",o),this.sidebarInitData=this.searchLocalStorage(o),this.logger.info("cd-shell/HomeComponent::ngOnInit()/this.sidebarInitData:",this.sidebarInitData);const t=localStorage.getItem("socketData");if(t){let r=function(a){return"appInit"===a.name?a:null};this.socketData=JSON.parse(t).filter(r),this.logger.info("cd-shell/HomeComponent::ngOnInit()/this.socketData:",this.socketData)}else this.logger.info("Err: socket data is not valid")}initialize(){const o={storageType:d.StorageType.CdObjId,cdObjId:{appId:localStorage.getItem("appId"),resourceGuid:null,resourceName:"HomeComponent",ngModule:"SharedModule",jwtToken:localStorage.getItem("accessToken"),socket:null,commTrack:null}};this.logger.info("cd-shell/HomeComponent::ngOnInit()/filter:",o),this.sidebarInitData=this.searchLocalStorage(o),this.logger.info("cd-shell/HomeComponent::ngOnInit()/this.sidebarInitData:",this.sidebarInitData);const t=localStorage.getItem("socketData");if(t){let r=function(a){return"appInit"===a.name?a:null};this.socketData=JSON.parse(t).filter(r),this.logger.info("cd-shell/HomeComponent::ngOnInit()/this.socketData:",this.socketData)}else this.logger.info("Err: socket data is not valid");this.setAppId()}setAppId(){var o=this;return(0,x.Z)(function*(){console.log("cd-shell/HomeComponent::setAppId()/01"),console.log("cd-shell/HomeComponent::setAppId()/this.svSio.socket:",o.svSio.socket),localStorage.removeItem("appId");const t=localStorage.getItem("appId");console.log("cd-shell/HomeComponent::setAppId()/appId:",t);const i=yield o.configPushPayload("register-client","push-registered-client",1e3);console.log("cd-shell/HomeComponent::setAppId()/envl:",i),o.listen("push-registered-client"),o.listen("msg-relayed"),o.listen("push-msg-relayed"),o.listen("push-menu"),o.sendSioMessage(i.pushData.triggerEvent,i)})()}listen(o){this.logger.info("cd-shell/cd-shell/HomeComponent::listen/event:",o),this.svSioTest.sioListen(o).subscribe({next:t=>{switch(console.log("cd-shell/HomeComponent::pushSubscribe()/payLoad:",t),t.pushData.emittEvent){case"push-registered-client":console.log("cd-shell/HomeComponent::listenSecure()/push-registered-client/:payLoad.pushData.emittEvent:",t.pushData.emittEvent),console.log("cd-shell/HomeComponent::listenSecure()/push-registered-client/:payLoad.pushData.triggerEvent:",t.pushData.triggerEvent),console.log("handle push-registered-client event"),this.saveSocket(t);break;case"push-msg-relayed":console.log("cd-shell/HomeComponent::listenSecure()/push-msg-relayed/:payLoad.pushData.emittEvent:",t.pushData.emittEvent),console.log("cd-shell/HomeComponent::listenSecure()/push-msg-relayed/:payLoad.pushData.triggerEvent:",t.pushData.triggerEvent),console.log("handle push-msg-relayed event"),this.updateRelayed(t);break;case"msg-relayed":console.log("cd-shell/HomeComponent::listenSecure()/msg-relayed/:payLoad.pushData.emittEvent:",t.pushData.emittEvent),console.log("cd-shell/HomeComponent::listenSecure()/msg-relayed/:payLoad.pushData.triggerEvent:",t.pushData.triggerEvent),console.log("handle msg-relayed event");break;case"push-menu":console.log("cd-shell/HomeComponent::listenSecure()/push-menu/:payLoad.pushData.emittEvent:",t.pushData.emittEvent),console.log("cd-shell/HomeComponent::listenSecure()/push-menu/:payLoad.pushData.triggerEvent:",t.pushData.triggerEvent),console.log("cd-shell/HomeComponent::listenSecure()/push-menu/:payLoad:",t),console.log("handle push-menu event"),this.routParams.queryParams.token=t.pushData.token}},error:t=>{console.error("cd-shell/cd-shell/HomeComponent::listen/Error receiving message:",t)},complete:()=>{console.log("cd-shell/cd-shell/HomeComponent::listen/Message subscription complete")}})}sendSioMessage(o,t){this.logger.info("cd-shell/HomeComponent::sendSioMessage/triggerEvent:",o),this.logger.info("cd-shell/HomeComponent::sendSioMessage/envl:",t),this.svSioTest.sendMessage(o,t).subscribe({next:i=>{console.log("Message sent successfully:",i)},error:i=>{console.error("Error sending message:",i)},complete:()=>{console.log("Message sending complete")}})}setHeader(){console.log("starting HomeService::setHeader()"),this.key&&this.uid&&this.sid?this.svUser.getUser$({query:{where:{userId:this.uid,activationKey:this.key}}},this.sid).subscribe(t=>{console.log("HomeService::setHeader()/subscribe/res:",t),t.data.length>0&&(this.header=`Congratulations ${t.data[0].userName}, your account is now active.`)}):this.header="Welcome!"}home(o){this.logger.info("starting cd-shell/HomeComponent::home");let t=o.value;const i=o.valid;this.logger.info("cd-shell/HomeComponent::home/01"),this.logger.info("cd-shell/HomeComponent::home/fg:",o),this.logger.info("cd-shell/HomeComponent::home/valid:",i),this.submitted=!0,t=Object.assign({},t,{consumerGuid:c.N.consumerToken});try{this.logger.info("cd-shell/HomeComponent::home/02"),i&&(this.logger.info("cd-shell/HomeComponent::home/03"),this.initSession(t))}catch{this.logger.info("cd-shell/HomeComponent::home/04"),this.errMsg="Something went wrong!!",this.homeInvalid=!0}}initSession(o){this.logger.info("cd-shell/HomeComponent::initSession/01"),this.svUser.auth$(o).subscribe(t=>{if(!0===t.app_state.success){if(this.logger.info("cd-shell/HomeComponent::initSession/res:",JSON.stringify(t)),this.svSess.appState=t.app_state,null!==t.app_state.sess.cd_token&&t.app_state.success){this.logger.info("cd-shell/HomeComponent::initSession/02");const i=this.configPushPayload("home","push-menu",t.data.userData.userId);i.pushData.m=t.data.menuData,this.logger.info("cd-shell/HomeComponent::initSession/envl:",i),"sio"===c.N.wsMode&&(this.logger.info("cd-shell/HomeComponent::initSession/envl:...using sio"),this.svSio.sendPayLoad(i)),"wss"===c.N.wsMode&&(this.logger.info("cd-shell/HomeComponent::initSession/envl:...using wss"),this.svWss.sendMsg(i)),this.svSess.createSess(t,this.svMenu),this.svUser.currentUser={name:`${t.data.userData.userName}`,picture:`${c.N.shellHost}/user-resources/${t.data.userData.userGuid}/avatar-01/a.jpg`},this.svNav.userMenu=[{title:"Profile",link:"/pages/cd-auth/register"},{title:"Log out",link:"/pages/cd-auth/logout"}],this.route.navigate([c.N.initialPage],{queryParams:{token:t.app_state.sess.cd_token},skipLocationChange:!0,replaceUrl:!1})}}else this.errMsg="The userName and password were not valid",this.homeInvalid=!0,this.svSess.logout()})}configPushPayload(o,t,i){console.log("starting cd-user::HomeComponent::configPushPayload()"),this.resourceGuid=this.svBase.getGuid();const r={pushData:{pushGuid:"",m:"",pushRecepients:[],triggerEvent:"",emittEvent:"",token:"",isNotification:null,appSockets:this.socketData,isAppInit:!0,commTrack:{initTime:Number(new Date),relayTime:null,relayed:!1,pushed:!1,pushTime:null,deliveryTime:null,delivered:!1,completed:!1,completedTime:null}},req:null,resp:null};console.log("cd-user::HomeComponent::configPushPayload()/this.resourceGuid:",this.resourceGuid);const a=this.resourceGuid,k={appId:localStorage.getItem("appId"),ngModule:"UserFrontModule",resourceName:"HomeComponent",resourceGuid:this.resourceGuid,jwtToken:this.jwtWsToken,socket:null,socketId:"",commTrack:{initTime:Number(new Date),relayTime:null,relayed:!1,pushed:!1,pushTime:null,deliveryTime:null,delivered:!1,completed:!1,completedTime:null}};localStorage.setItem(a,JSON.stringify(k));const C=[{userId:i,subTypeId:1,cdObjId:k}],v={...r};v.pushData.triggerEvent=o,v.pushData.emittEvent=t;const b={...C[0]};b.subTypeId=1,v.pushData.pushRecepients.push(b);const S={...C[0]};return S.subTypeId=7,this.logger.info("cd-user/HomeComponent::configPushPayload()/uRecepient:",JSON.stringify(S)),S.cdObjId=this.sidebarInitData.value,v.pushData.pushRecepients.push(S),this.logger.info("cd-user/HomeComponent::configPushPayload()/envl:",JSON.stringify(v)),v}saveSocket(o){console.log("cd-shell/HomeComponent::saveSocket()/payLoad:",o);const t=o.pushData.appSockets.filter(function i(r){return"appInit"===r.name?r:null});if(t.length>0){const r=JSON.stringify(t);localStorage.removeItem("socketData"),localStorage.setItem("socketData",r)}}updateRelayed(o){console.log("updateRelayed()/01"),console.log("updateRelayed()/payLoad:",o)}searchLocalStorage(o){this.logger.info("starting cd-shell/HomeComponent::searchLocalStorage()/lcLength:");const t=[],i=localStorage.length;this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/lcLength:",i);for(let n=0;n<localStorage.length;n++){const p=localStorage.key(n);var a=localStorage.getItem(p);this.logger.info("Key: "+p+", Value: "+a);try{if(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/1"),"object"==typeof a){this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/2"),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/v:",a);const L=JSON.parse(a);"success"in L&&(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/3"),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/appState:",L)),"resourceGuid"in L&&(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/4"),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/cdObjId:",L)),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/5"),t.push({key:p,value:JSON.parse(a)})}else this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/typeof (v):",typeof a),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/6"),t.push({key:p,value:JSON.parse(a)})}catch(L){this.logger.info("offending item:",a),this.logger.info("the item is not an object"),this.logger.info("Error:",L)}}this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/lcArr:",t),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/f.cdObjId!.resourceName:",o.cdObjId.resourceName);const C=n=>"object"==typeof n.value,v=n=>"resourceName"in n.value,b=n=>n.value.resourceName===o.cdObjId.resourceName&&n.value.ngModule===o.cdObjId.ngModule,S=(n,p)=>n.value.commTrack.initTime>p.value.commTrack.initTime?n:p;let I=null;try{this.debug?(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/debug=true:"),I=t.filter(n=>"object"==typeof n.value?(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/filteredByObject: d:",n),n):null).filter(n=>"resourceName"in n.value?(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/filteredByResourceNameField: d:",n),n):null).filter(n=>(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/filteredByName: d:",n),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/filteredByName: d.value.resourceName:",n.value.resourceName),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/filteredByName: f.cdObjId!.resourceName:",o.cdObjId.resourceName),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/filteredByName: d.value.ngModule:",n.value.ngModule),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/filteredByName: f.cdObjId!.ngModule:",o.cdObjId.ngModule),n.value.resourceName===o.cdObjId.resourceName&&n.value.ngModule===o.cdObjId.ngModule?n:null)).reduce((n={},p={})=>(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/prev:",n),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/current:",p),n.value.commTrack.initTime>p.value.commTrack.initTime?n:p))):(this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/debug=false:"),I=t.filter(C).filter(v).filter(b).reduce(S)),this.logger.info("cd-shell/HomeComponent::searchLocalStorage()/ret:",I)}catch(n){this.logger.info("Error:",n)}return I}goTo(o){this.route.navigate([o],{queryParams:{token:this.sid},skipLocationChange:!0,replaceUrl:!1})}onFocus(){this.errMsg=""}}H.\u0275fac=function(o){return new(o||H)(e.\u0275\u0275directiveInject(G.NGXLogger),e.\u0275\u0275directiveInject(d.SioClientService),e.\u0275\u0275directiveInject(d.WebsocketService),e.\u0275\u0275directiveInject(d.UserService),e.\u0275\u0275directiveInject(d.SessService),e.\u0275\u0275directiveInject(d.MenuService),e.\u0275\u0275directiveInject(d.NavService),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(u.ActivatedRoute),e.\u0275\u0275directiveInject(d.BaseService),e.\u0275\u0275directiveInject(U.h))},H.\u0275cmp=e.\u0275\u0275defineComponent({type:H,selectors:[["app-home"]],decls:33,vars:1,consts:[[1,"home-btn","d-none","d-sm-block"],["routerLink",""],[1,"mdi","mdi-home-variant","h2","text-white"],[1,"container-fluid","p-0"],[1,"row","g-0"],[1,"col-lg-4"],[1,"authentication-page-content","p-4","d-flex","align-items-center","min-vh-100"],[1,"w-100"],[1,"row","justify-content-center"],[1,"col-lg-9"],[1,"text-center"],["routerLink","",1,"logo"],["src","assets/images/logo-dark.png","height","20","alt","logo"],[1,"font-size-18","mt-4"],[1,"text-muted"],[1,"fw-medium","text-primary",3,"click"],[1,"p-2","mt-5"],[1,"mt-5","text-center"],[1,"col-lg-8"],[1,"authentication-bg"],[1,"bg-overlay"]],template:function(o,t){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"a",1),e.\u0275\u0275element(2,"i",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div")(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div")(12,"div",10)(13,"div")(14,"a",11),e.\u0275\u0275element(15,"img",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"h4",13),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"p",14)(19,"a",15),e.\u0275\u0275listener("click",function(){return t.goTo(t.urlLogin)}),e.\u0275\u0275text(20," Sign-in "),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(21," -in to use ASDAP"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(22,"div",16),e.\u0275\u0275elementStart(23,"div",17)(24,"p"),e.\u0275\u0275text(25,"Don't have an account ? "),e.\u0275\u0275elementStart(26,"a",15),e.\u0275\u0275listener("click",function(){return t.goTo(t.urlRegister)}),e.\u0275\u0275text(27," Register "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"p"),e.\u0275\u0275text(29,"\xa9 2024 ASDAP. Powered by CORPDESK"),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275elementStart(30,"div",18)(31,"div",19),e.\u0275\u0275element(32,"div",20),e.\u0275\u0275elementEnd()()()()()),2&o&&(e.\u0275\u0275advance(17),e.\u0275\u0275textInterpolate(t.header))}});const ce=[{path:"",component:H},{path:"home",component:H},{path:"login",component:A},{path:"signup",component:_},{path:"reset-password",component:F}];class R{constructor(o){this.router=o,this.monitorRouting()}monitorRouting(){this.router.events.subscribe(o=>{o instanceof u.NavigationStart?console.log("AuthRoutingModule::monitorRouting()/Navigation started to:",o.url,"with state:",o.restoredState):o instanceof u.NavigationEnd?console.log("AuthRoutingModule::monitorRouting()/Navigation ended at:",o.url,"with state:",o.urlAfterRedirects):o instanceof u.NavigationCancel?console.warn("AuthRoutingModule::monitorRouting()/Navigation canceled:",o.url,"with reason:",o.reason):o instanceof u.NavigationError&&console.error("AuthRoutingModule::monitorRouting()/Navigation error:",o.url,o.error)})}}R.\u0275fac=function(o){return new(o||R)(e.\u0275\u0275inject(u.Router))},R.\u0275mod=e.\u0275\u0275defineNgModule({type:R}),R.\u0275inj=e.\u0275\u0275defineInjector({imports:[u.RouterModule.forChild(ce),u.RouterModule]});class P{}P.\u0275fac=function(o){return new(o||P)},P.\u0275mod=e.\u0275\u0275defineNgModule({type:P}),P.\u0275inj=e.\u0275\u0275defineInjector({imports:[y.CommonModule,u.RouterModule,l.FormsModule,l.ReactiveFormsModule,E.NgbAlertModule,N.W,R,u.RouterModule]})},81042:(V,w,m)=>{m.d(w,{Z:()=>U});var y,l=new Uint8Array(16);function u(){if(!y&&!(y=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return y(l)}const E=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,x=function N(h){return"string"==typeof h&&E.test(h)};for(var g=[],d=0;d<256;++d)g.push((d+256).toString(16).substr(1));const U=function G(h,f,D){var j=(h=h||{}).random||(h.rng||u)();if(j[6]=15&j[6]|64,j[8]=63&j[8]|128,f){D=D||0;for(var M=0;M<16;++M)f[D+M]=j[M];return f}return function c(h){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,D=(g[h[f+0]]+g[h[f+1]]+g[h[f+2]]+g[h[f+3]]+"-"+g[h[f+4]]+g[h[f+5]]+"-"+g[h[f+6]]+g[h[f+7]]+"-"+g[h[f+8]]+g[h[f+9]]+"-"+g[h[f+10]]+g[h[f+11]]+g[h[f+12]]+g[h[f+13]]+g[h[f+14]]+g[h[f+15]]).toLowerCase();if(!x(D))throw TypeError("Stringified UUID is invalid");return D}(j)}}}]);